/* Generated by Nim Compiler v1.4.0 */
/*   (c) 2020 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64

/* section: NIM_merge_HEADERS */

#include "nimbase.h"
#include <sys/types.h>
                       #include <sys/event.h>
                       #include <sys/time.h>
#include <string.h>
#include <sys/types.h>
                                      #include <sys/sysctl.h>
#include <sys/event.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <unistd.h>
#include <time.h>
#include <errno.h>
#include <signal.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix

/* section: NIM_merge_FRAME_DEFINES */
#define nimfr_(x, y)
#define nimln_(x, y)

/* section: NIM_merge_FORWARD_TYPES */
typedef struct tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ;
typedef struct tySequence__aFT14fmnUl0dbEzr23F30g tySequence__aFT14fmnUl0dbEzr23F30g;
typedef struct tySequence__5L9b5Ztm9adPEys1vE9cEPQJA tySequence__5L9b5Ztm9adPEys1vE9cEPQJA;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TGenericSeq TGenericSeq;
typedef struct tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw;
typedef struct tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA;
typedef struct tySequence__mqHCvcswroDetkzsL3ixtg tySequence__mqHCvcswroDetkzsL3ixtg;
typedef struct NimStringDesc NimStringDesc;
typedef struct tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA;
typedef struct tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct tySequence__uB9b75OUPRENsBAu4AnoePA tySequence__uB9b75OUPRENsBAu4AnoePA;
typedef struct tyObject_ReadyKey__vOvPQEijZeFv1xAgbh5rNw tyObject_ReadyKey__vOvPQEijZeFv1xAgbh5rNw;
typedef struct tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA;

/* section: NIM_merge_TYPES */
struct tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ {
int kqFD;
NI maxFD;
tySequence__aFT14fmnUl0dbEzr23F30g* changes;
tySequence__5L9b5Ztm9adPEys1vE9cEPQJA* fds;
NI count;
int sock;
};
typedef NU8 tyEnum_TNimKind__jIBKr1ejBgsfM33Kxw4j7A;
typedef NU8 tySet_tyEnum_TNimTypeFlag__v8QUszD1sWlSIWZz7mC4bQ;
typedef N_NIMCALL_PTR(void, tyProc__ojoeKfW4VYIm36I9cpDTQIg) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, tyProc__WSm2xU5ARYv9aAR4l0z9c9auQ) (void* p);
struct TNimType {
NI size;
NI align;
tyEnum_TNimKind__jIBKr1ejBgsfM33Kxw4j7A kind;
tySet_tyEnum_TNimTypeFlag__v8QUszD1sWlSIWZz7mC4bQ flags;
TNimType* base;
TNimNode* node;
void* finalizer;
tyProc__ojoeKfW4VYIm36I9cpDTQIg marker;
tyProc__WSm2xU5ARYv9aAR4l0z9c9auQ deepcopy;
};
typedef NU8 tyEnum_TNimNodeKind__unfNsxrcATrufDZmpBq4HQ;
struct TNimNode {
tyEnum_TNimNodeKind__unfNsxrcATrufDZmpBq4HQ kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TGenericSeq {
NI len;
NI reserved;
};
typedef NU32 tySet_tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg;
struct tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA {
tySequence__mqHCvcswroDetkzsL3ixtg* readList;
tySequence__mqHCvcswroDetkzsL3ixtg* writeList;
};
struct tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw {
NI ident;
tySet_tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg events;
NI param;
tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA data;
};
typedef NU8 tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg;
typedef int tyArray__SKEqGXcReU4NvbQlH779b5Q[2];
struct NimStringDesc {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct RootObj {
TNimType* m_type;
};
struct Exception {
  RootObj Sup;
Exception* parent;
NCSTRING name;
NimStringDesc* message;
tySequence__uB9b75OUPRENsBAu4AnoePA* trace;
Exception* up;
};
struct tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA {
  Exception Sup;
};
struct tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA {
  tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA Sup;
};
typedef struct kevent tyArray__80NdCG41SyhPocFo20IbDw[64];
struct tyObject_ReadyKey__vOvPQEijZeFv1xAgbh5rNw {
NI fd;
tySet_tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg events;
NI32 errorCode;
};
typedef N_NOCONV_PTR(void, tyProc__ZEo3s9cIqJYP74f7GMZM2FA) (int x);
typedef struct {
N_NIMCALL_PTR(NIM_BOOL, ClP_0) (int fd, void* ClE_0);
void* ClE_0;
} tyProc__kbFLS7lxxUPzrFcbZuGUzQ;
struct tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA {
NCSTRING procname;
NI line;
NCSTRING filename;
};

/* section: NIM_merge_SEQ_TYPES */
struct tySequence__aFT14fmnUl0dbEzr23F30g {
  TGenericSeq Sup;
  struct kevent data[SEQ_DECL_SIZE];
};
struct tySequence__5L9b5Ztm9adPEys1vE9cEPQJA {
  TGenericSeq Sup;
  tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw data[SEQ_DECL_SIZE];
};
struct tySequence__mqHCvcswroDetkzsL3ixtg {
  TGenericSeq Sup;
  tyProc__kbFLS7lxxUPzrFcbZuGUzQ data[SEQ_DECL_SIZE];
};
struct tySequence__uB9b75OUPRENsBAu4AnoePA {
  TGenericSeq Sup;
  tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA data[SEQ_DECL_SIZE];
};

/* section: NIM_merge_PROC_HEADERS */
static N_NIMCALL(void, Marker_tySequence__aFT14fmnUl0dbEzr23F30g)(void* p, NI op);
N_LIB_PRIVATE N_NIMCALL(void, nimGCvisit)(void* d, NI op);
static N_NIMCALL(void, Marker_tySequence__5L9b5Ztm9adPEys1vE9cEPQJA)(void* p, NI op);
static N_NIMCALL(void, Marker_tyRef__Y5hK0M9cL3lXwccEV9cgR9cQw)(void* p, NI op);
static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a, int v, NI size);
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size);
N_LIB_PRIVATE N_NIMCALL(void, raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w)(NI32 message);
N_LIB_PRIVATE N_NIMCALL(NimStringDesc*, osErrorMsg__33xViSVWAmDrexoKkLfMhg)(NI32 errorCode);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
static N_INLINE(void, copyMem__i80o3k0SgEI5gTRCzYdyWAsystem)(void* dest, void* source, NI size);
N_LIB_PRIVATE N_NIMCALL(NimStringDesc*, nimIntToStr)(NI x);
N_LIB_PRIVATE N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
N_LIB_PRIVATE N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* dest, NI addlen);
static N_NIMCALL(void, Marker_tyRef__tNpnIL9cOkrikfe5IwGl77A)(void* p, NI op);
N_LIB_PRIVATE N_NIMCALL(void*, newObj)(TNimType* typ, NI size);
N_LIB_PRIVATE N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src);
N_LIB_PRIVATE N_NIMCALL(void, raiseExceptionEx)(Exception* e, NCSTRING ename, NCSTRING procname, NCSTRING filename, NI line);
N_LIB_PRIVATE N_NIMCALL(NI32, osLastError__9bUWNxbcGnToMWA9b79aTXLIw)(void);
N_LIB_PRIVATE N_NIMCALL(int, createNativeSocket__XMhukDsWurFLge2YkET1SQ)(int domain, int sockType, int protocol, NIM_BOOL inheritable);
N_LIB_PRIVATE N_NIMCALL(tySequence__5L9b5Ztm9adPEys1vE9cEPQJA*, newSeq__ErBJnYLwXUTIuCLPpHEQYA)(NI len);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewSeqOfCap)(TNimType* typ, NI cap);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, verifySelectParams__VELOTGJpsenobkytwG1KAw)(NI timeout);
N_LIB_PRIVATE N_NIMCALL(void, failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A)(NimStringDesc* msg);
static N_INLINE(NI, percentpercent___dgYAo7RfdUVVpvkfKDym8w_4system)(NI x, NI y);
N_LIB_PRIVATE N_NIMCALL(void, raiseIOSelectorsError__DsOWi00vXgEmCXwnjpsJhw)(NimStringDesc* message);
N_LIB_PRIVATE N_NIMCALL(TGenericSeq*, incrSeqV3)(TGenericSeq* s, TNimType* typ);
N_LIB_PRIVATE N_NIMCALL(TGenericSeq*, setLengthSeqV2)(TGenericSeq* s, TNimType* typ, NI newLen);
N_LIB_PRIVATE N_NIMCALL(void, genericSeqAssign)(void* dest, void* src, TNimType* mt);
N_LIB_PRIVATE N_NIMCALL(NimStringDesc*, nsuFormatSingleElem)(NimStringDesc* formatstr, NimStringDesc* a);
static N_INLINE(NIM_BOOL, contains__fNhZDn5n0fjsgTdeG4k9a9bgselectors)(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ* s, NI fd);

/* section: NIM_merge_DATA */
N_LIB_PRIVATE TNimType NTI__jkoZicTBtYdKkYck5SFJEQ_;
extern TNimType NTI__nlCscttRCss70IBTyuBqnA_;
extern TNimType NTI__rR5Bzr1D5krxoo1NcNyeMA_;
extern TNimType NTI__9cG9coEVt8bUEuxUupPPZigQ_;
N_LIB_PRIVATE TNimType NTI__aFT14fmnUl0dbEzr23F30g_;
N_LIB_PRIVATE TNimType NTI__561GPxg10TdJiEAAWoraPw_;
N_LIB_PRIVATE TNimType NTI__nI40bZzTyYVrl763dZ9aHDg_;
N_LIB_PRIVATE TNimType NTI__YIRsZrDT89buh37M5yeUgng_;
extern TNimType NTI__hOYUN4IOpj9adMwn6W7S2VA_;
N_LIB_PRIVATE TNimType NTI__5L9b5Ztm9adPEys1vE9cEPQJA_;
N_LIB_PRIVATE TNimType NTI__Y5hK0M9cL3lXwccEV9cgR9cQw_;
static NIM_CONST tyArray__SKEqGXcReU4NvbQlH779b5Q TM__ln5vuDpFyDrAqQbYD2g52Q_7 = {((int) 1),
((int) 29)}
;
STRING_LITERAL(TM__ln5vuDpFyDrAqQbYD2g52Q_8, " (code: ", 8);
STRING_LITERAL(TM__ln5vuDpFyDrAqQbYD2g52Q_9, ")", 1);
extern TNimType NTI__qrLSDoe2oBoAqNtJ9badtnA_;
N_LIB_PRIVATE TNimType NTI__W6GmT4FRSGpTsHizSNfKpA_;
N_LIB_PRIVATE TNimType NTI__tNpnIL9cOkrikfe5IwGl77A_;
STRING_LITERAL(TM__ln5vuDpFyDrAqQbYD2g52Q_10, "selectors.nim(321, 13) `timeout >= -1` Cannot select with a neg"
"ative value, got ", 80);
STRING_LITERAL(TM__ln5vuDpFyDrAqQbYD2g52Q_11, "ioselectors_kqueue.nim(569, 17) `true` Unsupported kqueue filte"
"r in the queue!", 78);
STRING_LITERAL(TM__ln5vuDpFyDrAqQbYD2g52Q_12, "Maximum number of descriptors is exhausted!", 43);
STRING_LITERAL(TM__ln5vuDpFyDrAqQbYD2g52Q_13, "ioselectors_kqueue.nim(374, 11) `\012not (pkey.ident == InvalidIde"
"nt)` Descriptor [", 80);
STRING_LITERAL(TM__ln5vuDpFyDrAqQbYD2g52Q_14, "] is not registered in the queue!", 33);
extern TNimType NTI__mqHCvcswroDetkzsL3ixtg_;
STRING_LITERAL(TM__ln5vuDpFyDrAqQbYD2g52Q_15, "ioselectors_kqueue.nim(242, 11) `\012not (pkey.ident == InvalidIde"
"nt)` ", 68);
STRING_LITERAL(TM__ln5vuDpFyDrAqQbYD2g52Q_16, "Descriptor $# is not registered in the queue!", 45);
STRING_LITERAL(TM__ln5vuDpFyDrAqQbYD2g52Q_17, "ioselectors_kqueue.nim(244, 11) `pkey.events * maskEvents == {}"
"` ", 65);
STRING_LITERAL(TM__ln5vuDpFyDrAqQbYD2g52Q_18, "ioselectors_kqueue.nim(221, 11) `s.fds[fdi].ident == InvalidIde"
"nt` ", 67);

/* section: NIM_merge_VARS */
extern NIM_THREADVAR NIM_BOOL nimInErrorMode__759bT87luu8XGcbkw13FUjA;

/* section: NIM_merge_PROCS */
static N_NIMCALL(void, Marker_tySequence__aFT14fmnUl0dbEzr23F30g)(void* p, NI op) {
	tySequence__aFT14fmnUl0dbEzr23F30g* a;
	NI T1_;
	a = (tySequence__aFT14fmnUl0dbEzr23F30g*)p;
	T1_ = (NI)0;
}
static N_NIMCALL(void, Marker_tySequence__5L9b5Ztm9adPEys1vE9cEPQJA)(void* p, NI op) {
	tySequence__5L9b5Ztm9adPEys1vE9cEPQJA* a;
	NI T1_;
	a = (tySequence__5L9b5Ztm9adPEys1vE9cEPQJA*)p;
	T1_ = (NI)0;
	for (T1_ = 0; T1_ < (a ? a->Sup.len : 0); T1_++) {
	nimGCvisit((void*)a->data[T1_].data.readList, op);
	nimGCvisit((void*)a->data[T1_].data.writeList, op);
	}
}
static N_NIMCALL(void, Marker_tyRef__Y5hK0M9cL3lXwccEV9cgR9cQw)(void* p, NI op) {
	tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ* a;
	a = (tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ*)p;
	nimGCvisit((void*)(*a).changes, op);
	nimGCvisit((void*)(*a).fds, op);
}
static N_INLINE(void, nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
	nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory(p, ((int) 0), size);
}
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest, source, ((size_t) (size)));
}
static N_INLINE(void, copyMem__i80o3k0SgEI5gTRCzYdyWAsystem)(void* dest, void* source, NI size) {
	nimCopyMem(dest, source, size);
}
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	{
		void* T5_;
		void* T6_;
		if (!!((src == NIM_NIL))) goto LA3_;
		T5_ = (void*)0;
		T5_ = ((void*) ((&(*dest).data[(*dest).Sup.len])));
		T6_ = (void*)0;
		T6_ = ((void*) ((*src).data));
		copyMem__i80o3k0SgEI5gTRCzYdyWAsystem(T5_, T6_, ((NI) ((NI)((*src).Sup.len + ((NI) 1)))));
		(*dest).Sup.len += (*src).Sup.len;
	}
	LA3_: ;
}
static N_NIMCALL(void, Marker_tyRef__tNpnIL9cOkrikfe5IwGl77A)(void* p, NI op) {
	tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA* a;
	a = (tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA*)p;
	nimGCvisit((void*)(*a).Sup.Sup.parent, op);
	nimGCvisit((void*)(*a).Sup.Sup.message, op);
	nimGCvisit((void*)(*a).Sup.Sup.trace, op);
	nimGCvisit((void*)(*a).Sup.Sup.up, op);
}
N_LIB_PRIVATE N_NIMCALL(void, raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w)(NI32 message) {
	NimStringDesc* msg;
	NimStringDesc* T1_;
	NimStringDesc* T2_;
	NimStringDesc* T3_;
	tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA* err;
	tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA* T4_;
{	msg = ((NimStringDesc*) NIM_NIL);
	T1_ = (NimStringDesc*)0;
	T2_ = (NimStringDesc*)0;
	T2_ = osErrorMsg__33xViSVWAmDrexoKkLfMhg(message);
	T3_ = (NimStringDesc*)0;
	T3_ = nimIntToStr(((NI) (message)));
	T1_ = rawNewString((T2_ ? T2_->Sup.len : 0) + (T3_ ? T3_->Sup.len : 0) + 9);
appendString(T1_, T2_);
appendString(T1_, ((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_8));
appendString(T1_, T3_);
appendString(T1_, ((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_9));
	msg = resizeString(msg, (T1_ ? T1_->Sup.len : 0) + 0);
appendString(msg, T1_);
	T4_ = (tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA*)0;
	T4_ = (tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA*) newObj((&NTI__tNpnIL9cOkrikfe5IwGl77A_), sizeof(tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA));
	(*T4_).Sup.Sup.Sup.m_type = (&NTI__W6GmT4FRSGpTsHizSNfKpA_);
	(*T4_).Sup.Sup.name = "IOSelectorsException";
	(*T4_).Sup.Sup.message = copyString(msg);
	(*T4_).Sup.Sup.parent = NIM_NIL;
	err = T4_;
	raiseExceptionEx((Exception*)err, "IOSelectorsException", "raiseIOSelectorsError", "selectors.nim", 280);
	goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__759bT87luu8XGcbkw13FUjA);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ*, newSelector__yb0zUxamNOUP9ang11E8gLg)(void) {
	tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ* result;
	int maxFD;
	size_t size;
	tyArray__SKEqGXcReU4NvbQlH779b5Q namearr;
	int kqFD;
	int usock;
	tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ* T17_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ*)0;
	maxFD = ((int) 0);
	size = ((size_t) 4);
	nimZeroMem((void*)namearr, sizeof(tyArray__SKEqGXcReU4NvbQlH779b5Q));
	nimCopyMem((void*)namearr, (NIM_CONST void*)TM__ln5vuDpFyDrAqQbYD2g52Q_7, sizeof(tyArray__SKEqGXcReU4NvbQlH779b5Q));
	{
		int T3_;
		NI32 T6_;
		T3_ = (int)0;
		T3_ = sysctl((&namearr[(((NI) 0))- 0]), ((unsigned int) 2), ((void*) ((&maxFD))), (&size), NIM_NIL, ((size_t) 0));
		if (!!((T3_ == ((NI32) 0)))) goto LA4_;
		T6_ = (NI32)0;
		T6_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
		raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T6_);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA4_: ;
	kqFD = kqueue();
	{
		NI32 T11_;
		if (!(kqFD < ((NI32) 0))) goto LA9_;
		T11_ = (NI32)0;
		T11_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
		raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T11_);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA9_: ;
	usock = createNativeSocket__XMhukDsWurFLge2YkET1SQ(AF_INET, SOCK_STREAM, IPPROTO_TCP, NIM_FALSE);
	{
		NI32 err;
		int T16_;
		if (!(usock == ((NI32) -1))) goto LA14_;
		err = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
		T16_ = (int)0;
		T16_ = close(kqFD);
		(void)(T16_);
		raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(err);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA14_: ;
	T17_ = (tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ*)0;
	T17_ = (tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ*) newObj((&NTI__Y5hK0M9cL3lXwccEV9cgR9cQw_), sizeof(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ));
	result = T17_;
	(*result).fds = newSeq__ErBJnYLwXUTIuCLPpHEQYA(((NI) (maxFD)));
	(*result).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*)nimNewSeqOfCap((&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 64));
	{
		NI32 i;
		NI32 res;
		i = (NI32)0;
		res = ((NI32) 0);
		{
			while (1) {
				if (!(res < maxFD)) goto LA20;
				i = res;
				(*result).fds->data[i].ident = ((NI) -1);
				res += ((NI) 1);
			} LA20: ;
		}
	}
	(*result).sock = usock;
	(*result).kqFD = kqFD;
	(*result).maxFD = ((NI) (maxFD));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, verifySelectParams__VELOTGJpsenobkytwG1KAw)(NI timeout) {
	{
		NimStringDesc* T5_;
		NimStringDesc* T6_;
		if (!!((((NI) -1) <= timeout))) goto LA3_;
		T5_ = (NimStringDesc*)0;
		T6_ = (NimStringDesc*)0;
		T6_ = nimIntToStr(timeout);
		T5_ = rawNewString((T6_ ? T6_->Sup.len : 0) + 80);
appendString(T5_, ((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_10));
appendString(T5_, T6_);
		failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A(T5_);
	}
	LA3_: ;
}
static N_INLINE(NI, percentpercent___dgYAo7RfdUVVpvkfKDym8w_4system)(NI x, NI y) {
	NI result;
	result = (NI)0;
	result = ((NI) ((NU)((NU64)(((NU) (x))) % (NU64)(((NU) (y))))));
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, selectInto__wG6pjYix84Cx3LJ4PLS2Gw)(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ* s, NI timeout, tyObject_ReadyKey__vOvPQEijZeFv1xAgbh5rNw* results, NI resultsLen_0) {
	NI result;
	struct timespec tv;
	tyArray__80NdCG41SyhPocFo20IbDw resTable;
	struct timespec* ptv;
	NI maxres;
	NI count;
	int T16_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	nimZeroMem((void*)(&tv), sizeof(struct timespec));
	nimZeroMem((void*)resTable, sizeof(tyArray__80NdCG41SyhPocFo20IbDw));
	ptv = (&tv);
	maxres = ((NI) 64);
	verifySelectParams__VELOTGJpsenobkytwG1KAw(timeout);
	{
		if (!!((timeout == ((NI) -1)))) goto LA3_;
		{
			NI T9_;
			if (!(((NI) 1000) <= timeout)) goto LA7_;
			tv.tv_sec = (NI)(timeout / ((NI) 1000));
			T9_ = (NI)0;
			T9_ = percentpercent___dgYAo7RfdUVVpvkfKDym8w_4system(timeout, ((NI) 1000));
			tv.tv_nsec = (NI)(T9_ * ((NI) 1000000));
		}
		goto LA5_;
		LA7_: ;
		{
			tv.tv_sec = ((long) 0);
			tv.tv_nsec = (NI)(timeout * ((NI) 1000000));
		}
		LA5_: ;
	}
	goto LA1_;
	LA3_: ;
	{
		ptv = NIM_NIL;
	}
	LA1_: ;
	{
		if (!(resultsLen_0 < maxres)) goto LA14_;
		maxres = resultsLen_0;
	}
	LA14_: ;
	count = ((NI) 0);
	T16_ = (int)0;
	T16_ = kevent((*s).kqFD, NIM_NIL, ((int) 0), (&resTable[(((NI) 0))- 0]), ((int) (maxres)), ptv);
	count = ((NI) (T16_));
	{
		NI32 err;
		if (!(count < ((NI) 0))) goto LA19_;
		result = ((NI) 0);
		err = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
		{
			if (!!((err == EINTR))) goto LA23_;
			raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(err);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		LA23_: ;
	}
	goto LA17_;
	LA19_: ;
	{
		if (!(count == ((NI) 0))) goto LA26_;
		result = ((NI) 0);
	}
	goto LA17_;
	LA26_: ;
	{
		NI i;
		NI k;
		tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw* pkey;
		i = ((NI) 0);
		k = ((NI) 0);
		pkey = (tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw*)0;
		{
			while (1) {
				if (!(i < count)) goto LA30;
				{
					struct kevent* kevent_1;
					tyObject_ReadyKey__vOvPQEijZeFv1xAgbh5rNw rkey;
					kevent_1 = (&resTable[(i)- 0]);
					nimZeroMem((void*)(&rkey), sizeof(tyObject_ReadyKey__vOvPQEijZeFv1xAgbh5rNw));
					rkey.fd = ((NI) ((*kevent_1).ident));
					rkey.events = 0;
					{
						if (!!(((NU16)((*kevent_1).flags & ((NU16) 16384)) == ((NU16) 0)))) goto LA34_;
						rkey.events = 128;
						rkey.errorCode = ((NI32) ((*kevent_1).data));
					}
					LA34_: ;
					switch ((*kevent_1).filter) {
					case ((NI) -1):
					{
						pkey = (&(*s).fds->data[(*kevent_1).ident]);
						rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 0)) & 31);
						{
							NU64 data;
							if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 6))&31U)))!=0)) goto LA39_;
							data = 0ULL;
							{
								NI T43_;
								NI32 err_2;
								T43_ = (NI)0;
								T43_ = read(((int) ((*kevent_1).ident)), ((void*) ((&data))), ((NI) 8));
								if (!!((T43_ == ((NI) 8)))) goto LA44_;
								err_2 = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
								{
									if (!(err_2 == EAGAIN)) goto LA48_;
									i += ((NI) 1);
									goto LA31;
								}
								goto LA46_;
								LA48_: ;
								{
									raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(err_2);
									if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								}
								LA46_: ;
							}
							LA44_: ;
							rkey.events = 64;
						}
						LA39_: ;
					}
					break;
					case ((NI) -2):
					{
						pkey = (&(*s).fds->data[(*kevent_1).ident]);
						rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 1)) & 31);
						rkey.events = 2;
					}
					break;
					case ((NI) -7):
					{
						pkey = (&(*s).fds->data[(*kevent_1).ident]);
						{
							if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 8))&31U)))!=0)) goto LA55_;
							(*s).count -= ((NI) 1);
							(*pkey).events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 9)) & 31);
						}
						LA55_: ;
						rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 2)) & 31);
					}
					break;
					case ((NI) -4):
					{
						pkey = (&(*s).fds->data[(*kevent_1).ident]);
						rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 5)) & 31);
						{
							if (!!(((NU32)((*kevent_1).fflags & ((NU32) 1)) == ((NU32) 0)))) goto LA60_;
							rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 11)) & 31);
						}
						LA60_: ;
						{
							if (!!(((NU32)((*kevent_1).fflags & ((NU32) 2)) == ((NU32) 0)))) goto LA64_;
							rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 10)) & 31);
						}
						LA64_: ;
						{
							if (!!(((NU32)((*kevent_1).fflags & ((NU32) 4)) == ((NU32) 0)))) goto LA68_;
							rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 12)) & 31);
						}
						LA68_: ;
						{
							if (!!(((NU32)((*kevent_1).fflags & ((NU32) 8)) == ((NU32) 0)))) goto LA72_;
							rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 13)) & 31);
						}
						LA72_: ;
						{
							if (!!(((NU32)((*kevent_1).fflags & ((NU32) 16)) == ((NU32) 0)))) goto LA76_;
							rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 14)) & 31);
						}
						LA76_: ;
						{
							if (!!(((NU32)((*kevent_1).fflags & ((NU32) 32)) == ((NU32) 0)))) goto LA80_;
							rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 15)) & 31);
						}
						LA80_: ;
						{
							if (!!(((NU32)((*kevent_1).fflags & ((NU32) 64)) == ((NU32) 0)))) goto LA84_;
							rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 16)) & 31);
						}
						LA84_: ;
					}
					break;
					case ((NI) -6):
					{
						pkey = (&(*s).fds->data[((NI) (ptrdiff_t) ((*kevent_1).udata))]);
						rkey.fd = ((NI) (ptrdiff_t) ((*kevent_1).udata));
						rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 3)) & 31);
					}
					break;
					case ((NI) -5):
					{
						rkey.fd = ((NI) (ptrdiff_t) ((*kevent_1).udata));
						pkey = (&(*s).fds->data[((NI) (ptrdiff_t) ((*kevent_1).udata))]);
						(*s).count -= ((NI) 1);
						(*pkey).events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 9)) & 31);
						rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 4)) & 31);
					}
					break;
					default:
					{
						{
							if (!NIM_FALSE) goto LA91_;
							failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A(((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_11));
						}
						LA91_: ;
					}
					break;
					}
					{
						if (!!(((NU16)((*kevent_1).flags & ((NU16) 32768)) == ((NU16) 0)))) goto LA95_;
						{
							if (!!(((*kevent_1).fflags == ((NU32) 0)))) goto LA99_;
							rkey.errorCode = ((NI32) ((*kevent_1).fflags));
						}
						goto LA97_;
						LA99_: ;
						{
							rkey.errorCode = ECONNRESET;
						}
						LA97_: ;
						rkey.events |= ((NU32)1)<<((((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 7)) & 31);
					}
					LA95_: ;
					results[k] = rkey;
					k += ((NI) 1);
					i += ((NI) 1);
				} LA31: ;
			} LA30: ;
		}
		result = k;
	}
	LA17_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, raiseIOSelectorsError__DsOWi00vXgEmCXwnjpsJhw)(NimStringDesc* message) {
	NimStringDesc* msg;
	tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA* err;
	tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA* T1_;
{	msg = ((NimStringDesc*) NIM_NIL);
	msg = resizeString(msg, (message ? message->Sup.len : 0) + 0);
appendString(msg, message);
	T1_ = (tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA*)0;
	T1_ = (tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA*) newObj((&NTI__tNpnIL9cOkrikfe5IwGl77A_), sizeof(tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA));
	(*T1_).Sup.Sup.Sup.m_type = (&NTI__W6GmT4FRSGpTsHizSNfKpA_);
	(*T1_).Sup.Sup.name = "IOSelectorsException";
	(*T1_).Sup.Sup.message = copyString(msg);
	(*T1_).Sup.Sup.parent = NIM_NIL;
	err = T1_;
	raiseExceptionEx((Exception*)err, "IOSelectorsException", "raiseIOSelectorsError", "selectors.nim", 280);
	goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, unregister__mzqO1CGAgiFwU0dC2Vrb1g)(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ* s, NI fd) {
	NI fdi;
	tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw* pkey;
	tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA emptyX60gensym127_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	fdi = fd;
	{
		if (!((*s).maxFD <= fdi)) goto LA3_;
		raiseIOSelectorsError__DsOWi00vXgEmCXwnjpsJhw(((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_12));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA3_: ;
	pkey = (&(*s).fds->data[fdi]);
	{
		NimStringDesc* T9_;
		NimStringDesc* T10_;
		if (!!(!(((*pkey).ident == ((NI) -1))))) goto LA7_;
		T9_ = (NimStringDesc*)0;
		T10_ = (NimStringDesc*)0;
		T10_ = nimIntToStr(fdi);
		T9_ = rawNewString((T10_ ? T10_->Sup.len : 0) + 113);
appendString(T9_, ((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_13));
appendString(T9_, T10_);
appendString(T9_, ((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_14));
		failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A(T9_);
	}
	LA7_: ;
	{
		if (!!(((*pkey).events == 0))) goto LA13_;
		{
			int lengthX60gensym109_;
			NI T31_;
			if (!!((((*pkey).events & 3) == 0))) goto LA17_;
			{
				struct kevent T23_;
				NI T24_;
				if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0)) goto LA21_;
				nimZeroMem((void*)(&T23_), sizeof(struct kevent));
				T23_.ident = ((NU) (fdi));
				T23_.filter = ((short) -1);
				T23_.flags = ((unsigned short) 2);
				T23_.fflags = ((unsigned int) 0);
				T23_.data = ((NI) 0);
				T23_.udata = NIM_NIL;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
				T24_ = (*s).changes->Sup.len++;
				(*s).changes->data[T24_] = T23_;
				(*s).count -= ((NI) 1);
			}
			LA21_: ;
			{
				struct kevent T29_;
				NI T30_;
				if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0)) goto LA27_;
				nimZeroMem((void*)(&T29_), sizeof(struct kevent));
				T29_.ident = ((NU) (fdi));
				T29_.filter = ((short) -2);
				T29_.flags = ((unsigned short) 2);
				T29_.fflags = ((unsigned int) 0);
				T29_.data = ((NI) 0);
				T29_.udata = NIM_NIL;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
				T30_ = (*s).changes->Sup.len++;
				(*s).changes->data[T30_] = T29_;
				(*s).count -= ((NI) 1);
			}
			LA27_: ;
			T31_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			lengthX60gensym109_ = ((int) (T31_));
			{
				if (!(((NI32) 0) < lengthX60gensym109_)) goto LA34_;
				{
					int T38_;
					int T39_;
					NI32 T42_;
					T38_ = (int)0;
					T38_ = (*s).kqFD;
					T39_ = (int)0;
					T39_ = kevent(T38_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym109_, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T39_ == ((NI32) -1))) goto LA40_;
					T42_ = (NI32)0;
					T42_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
					raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T42_);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA40_: ;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
			}
			LA34_: ;
		}
		goto LA15_;
		LA17_: ;
		{
			if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 2))&31U)))!=0)) goto LA44_;
			{
				struct kevent T50_;
				NI T51_;
				int lengthX60gensym112_;
				NI T52_;
				if (!!((((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 9))&31U)))!=0))) goto LA48_;
				nimZeroMem((void*)(&T50_), sizeof(struct kevent));
				T50_.ident = ((NU) (fdi));
				T50_.filter = ((short) -7);
				T50_.flags = ((unsigned short) 2);
				T50_.fflags = ((unsigned int) 0);
				T50_.data = ((NI) 0);
				T50_.udata = NIM_NIL;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
				T51_ = (*s).changes->Sup.len++;
				(*s).changes->data[T51_] = T50_;
				T52_ = ((*s).changes ? (*s).changes->Sup.len : 0);
				lengthX60gensym112_ = ((int) (T52_));
				{
					if (!(((NI32) 0) < lengthX60gensym112_)) goto LA55_;
					{
						int T59_;
						int T60_;
						NI32 T63_;
						T59_ = (int)0;
						T59_ = (*s).kqFD;
						T60_ = (int)0;
						T60_ = kevent(T59_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym112_, NIM_NIL, ((int) 0), NIM_NIL);
						if (!(T60_ == ((NI32) -1))) goto LA61_;
						T63_ = (NI32)0;
						T63_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
						raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T63_);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
					LA61_: ;
					(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
				}
				LA55_: ;
				(*s).count -= ((NI) 1);
			}
			LA48_: ;
			{
				int T66_;
				NI32 T69_;
				T66_ = (int)0;
				T66_ = close(((int) ((*pkey).ident)));
				if (!!((T66_ == ((NI32) 0)))) goto LA67_;
				T69_ = (NI32)0;
				T69_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T69_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA67_: ;
		}
		goto LA15_;
		LA44_: ;
		{
			sigset_t nmask;
			sigset_t omask;
			int signal_1;
			int T73_;
			int T74_;
			int T75_;
			struct kevent T82_;
			NI T83_;
			int lengthX60gensym116_;
			NI T84_;
			if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 3))&31U)))!=0)) goto LA71_;
			nimZeroMem((void*)(&nmask), sizeof(sigset_t));
			nimZeroMem((void*)(&omask), sizeof(sigset_t));
			signal_1 = ((int) ((*pkey).param));
			T73_ = (int)0;
			T73_ = sigemptyset((&nmask));
			(void)(T73_);
			T74_ = (int)0;
			T74_ = sigemptyset((&omask));
			(void)(T74_);
			T75_ = (int)0;
			T75_ = sigaddset((&nmask), signal_1);
			(void)(T75_);
			{
				int T78_;
				NI32 T81_;
				T78_ = (int)0;
				T78_ = sigprocmask(SIG_UNBLOCK, (&nmask), (&omask));
				if (!(T78_ == ((NI32) -1))) goto LA79_;
				T81_ = (NI32)0;
				T81_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T81_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA79_: ;
			signal(signal_1, ((tyProc__ZEo3s9cIqJYP74f7GMZM2FA) 0));
			nimZeroMem((void*)(&T82_), sizeof(struct kevent));
			T82_.ident = ((NU) ((*pkey).param));
			T82_.filter = ((short) -6);
			T82_.flags = ((unsigned short) 2);
			T82_.fflags = ((unsigned int) 0);
			T82_.data = ((NI) 0);
			T82_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T83_ = (*s).changes->Sup.len++;
			(*s).changes->data[T83_] = T82_;
			T84_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			lengthX60gensym116_ = ((int) (T84_));
			{
				if (!(((NI32) 0) < lengthX60gensym116_)) goto LA87_;
				{
					int T91_;
					int T92_;
					NI32 T95_;
					T91_ = (int)0;
					T91_ = (*s).kqFD;
					T92_ = (int)0;
					T92_ = kevent(T91_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym116_, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T92_ == ((NI32) -1))) goto LA93_;
					T95_ = (NI32)0;
					T95_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
					raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T95_);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA93_: ;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
			}
			LA87_: ;
			(*s).count -= ((NI) 1);
			{
				int T98_;
				NI32 T101_;
				T98_ = (int)0;
				T98_ = close(((int) ((*pkey).ident)));
				if (!!((T98_ == ((NI32) 0)))) goto LA99_;
				T101_ = (NI32)0;
				T101_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T101_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA99_: ;
		}
		goto LA15_;
		LA71_: ;
		{
			if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 4))&31U)))!=0)) goto LA103_;
			{
				struct kevent T109_;
				NI T110_;
				int lengthX60gensym119_;
				NI T111_;
				if (!!((((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 9))&31U)))!=0))) goto LA107_;
				nimZeroMem((void*)(&T109_), sizeof(struct kevent));
				T109_.ident = ((NU) ((*pkey).param));
				T109_.filter = ((short) -5);
				T109_.flags = ((unsigned short) 2);
				T109_.fflags = ((unsigned int) 0);
				T109_.data = ((NI) 0);
				T109_.udata = NIM_NIL;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
				T110_ = (*s).changes->Sup.len++;
				(*s).changes->data[T110_] = T109_;
				T111_ = ((*s).changes ? (*s).changes->Sup.len : 0);
				lengthX60gensym119_ = ((int) (T111_));
				{
					if (!(((NI32) 0) < lengthX60gensym119_)) goto LA114_;
					{
						int T118_;
						int T119_;
						NI32 T122_;
						T118_ = (int)0;
						T118_ = (*s).kqFD;
						T119_ = (int)0;
						T119_ = kevent(T118_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym119_, NIM_NIL, ((int) 0), NIM_NIL);
						if (!(T119_ == ((NI32) -1))) goto LA120_;
						T122_ = (NI32)0;
						T122_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
						raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T122_);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
					LA120_: ;
					(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
				}
				LA114_: ;
				(*s).count -= ((NI) 1);
			}
			LA107_: ;
			{
				int T125_;
				NI32 T128_;
				T125_ = (int)0;
				T125_ = close(((int) ((*pkey).ident)));
				if (!!((T125_ == ((NI32) 0)))) goto LA126_;
				T128_ = (NI32)0;
				T128_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T128_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA126_: ;
		}
		goto LA15_;
		LA103_: ;
		{
			struct kevent T132_;
			NI T133_;
			int lengthX60gensym122_;
			NI T134_;
			if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 5))&31U)))!=0)) goto LA130_;
			nimZeroMem((void*)(&T132_), sizeof(struct kevent));
			T132_.ident = ((NU) (fdi));
			T132_.filter = ((short) -4);
			T132_.flags = ((unsigned short) 2);
			T132_.fflags = ((unsigned int) 0);
			T132_.data = ((NI) 0);
			T132_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T133_ = (*s).changes->Sup.len++;
			(*s).changes->data[T133_] = T132_;
			T134_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			lengthX60gensym122_ = ((int) (T134_));
			{
				if (!(((NI32) 0) < lengthX60gensym122_)) goto LA137_;
				{
					int T141_;
					int T142_;
					NI32 T145_;
					T141_ = (int)0;
					T141_ = (*s).kqFD;
					T142_ = (int)0;
					T142_ = kevent(T141_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym122_, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T142_ == ((NI32) -1))) goto LA143_;
					T145_ = (NI32)0;
					T145_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
					raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T145_);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA143_: ;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
			}
			LA137_: ;
			(*s).count -= ((NI) 1);
		}
		goto LA15_;
		LA130_: ;
		{
			struct kevent T149_;
			NI T150_;
			int lengthX60gensym125_;
			NI T151_;
			if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 6))&31U)))!=0)) goto LA147_;
			nimZeroMem((void*)(&T149_), sizeof(struct kevent));
			T149_.ident = ((NU) (fdi));
			T149_.filter = ((short) -1);
			T149_.flags = ((unsigned short) 2);
			T149_.fflags = ((unsigned int) 0);
			T149_.data = ((NI) 0);
			T149_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T150_ = (*s).changes->Sup.len++;
			(*s).changes->data[T150_] = T149_;
			T151_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			lengthX60gensym125_ = ((int) (T151_));
			{
				if (!(((NI32) 0) < lengthX60gensym125_)) goto LA154_;
				{
					int T158_;
					int T159_;
					NI32 T162_;
					T158_ = (int)0;
					T158_ = (*s).kqFD;
					T159_ = (int)0;
					T159_ = kevent(T158_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym125_, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T159_ == ((NI32) -1))) goto LA160_;
					T162_ = (NI32)0;
					T162_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
					raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T162_);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA160_: ;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
			}
			LA154_: ;
			(*s).count -= ((NI) 1);
		}
		goto LA15_;
		LA147_: ;
		LA15_: ;
	}
	LA13_: ;
	nimZeroMem((void*)(&emptyX60gensym127_), sizeof(tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA));
	(*pkey).ident = ((NI) -1);
	(*pkey).events = 0;
	genericSeqAssign((&(*pkey).data.readList), emptyX60gensym127_.readList, (&NTI__mqHCvcswroDetkzsL3ixtg_));
	genericSeqAssign((&(*pkey).data.writeList), emptyX60gensym127_.writeList, (&NTI__mqHCvcswroDetkzsL3ixtg_));
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, updateHandle__44X3P7yzlH9cxfo01EwHR9bw)(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ* s, int fd, tySet_tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg events) {
	tySet_tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg maskEvents;
	NI fdi;
	tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw* pkey;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	maskEvents = 508;
	fdi = ((NI) (fd));
	{
		if (!((*s).maxFD <= fdi)) goto LA3_;
		raiseIOSelectorsError__DsOWi00vXgEmCXwnjpsJhw(((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_12));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA3_: ;
	pkey = (&(*s).fds->data[fdi]);
	{
		NimStringDesc* T9_;
		NimStringDesc* T10_;
		NimStringDesc* T11_;
		if (!!(!(((*pkey).ident == ((NI) -1))))) goto LA7_;
		T9_ = (NimStringDesc*)0;
		T10_ = (NimStringDesc*)0;
		T10_ = nimIntToStr(fdi);
		T11_ = (NimStringDesc*)0;
		T11_ = nsuFormatSingleElem(((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_16), T10_);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T9_ = rawNewString((T11_ ? T11_->Sup.len : 0) + 68);
appendString(T9_, ((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_15));
appendString(T9_, T11_);
		failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A(T9_);
	}
	LA7_: ;
	{
		if (!!((((*pkey).events & maskEvents) == 0))) goto LA14_;
		failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A(((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_17));
	}
	LA14_: ;
	{
		int lengthX60gensym70_;
		NI T52_;
		if (!!(((*pkey).events == events))) goto LA18_;
		{
			NIM_BOOL T22_;
			struct kevent T26_;
			NI T27_;
			T22_ = (NIM_BOOL)0;
			T22_ = (((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0);
			if (!(T22_)) goto LA23_;
			T22_ = !(((events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0));
			LA23_: ;
			if (!T22_) goto LA24_;
			nimZeroMem((void*)(&T26_), sizeof(struct kevent));
			T26_.ident = ((NU) (fdi));
			T26_.filter = ((short) -1);
			T26_.flags = ((unsigned short) 2);
			T26_.fflags = ((unsigned int) 0);
			T26_.data = ((NI) 0);
			T26_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T27_ = (*s).changes->Sup.len++;
			(*s).changes->data[T27_] = T26_;
			(*s).count -= ((NI) 1);
		}
		LA24_: ;
		{
			NIM_BOOL T30_;
			struct kevent T34_;
			NI T35_;
			T30_ = (NIM_BOOL)0;
			T30_ = (((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0);
			if (!(T30_)) goto LA31_;
			T30_ = !(((events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0));
			LA31_: ;
			if (!T30_) goto LA32_;
			nimZeroMem((void*)(&T34_), sizeof(struct kevent));
			T34_.ident = ((NU) (fdi));
			T34_.filter = ((short) -2);
			T34_.flags = ((unsigned short) 2);
			T34_.fflags = ((unsigned int) 0);
			T34_.data = ((NI) 0);
			T34_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T35_ = (*s).changes->Sup.len++;
			(*s).changes->data[T35_] = T34_;
			(*s).count -= ((NI) 1);
		}
		LA32_: ;
		{
			NIM_BOOL T38_;
			struct kevent T42_;
			NI T43_;
			T38_ = (NIM_BOOL)0;
			T38_ = !((((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0));
			if (!(T38_)) goto LA39_;
			T38_ = ((events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0);
			LA39_: ;
			if (!T38_) goto LA40_;
			nimZeroMem((void*)(&T42_), sizeof(struct kevent));
			T42_.ident = ((NU) (fdi));
			T42_.filter = ((short) -1);
			T42_.flags = ((unsigned short) 1);
			T42_.fflags = ((unsigned int) 0);
			T42_.data = ((NI) 0);
			T42_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T43_ = (*s).changes->Sup.len++;
			(*s).changes->data[T43_] = T42_;
			(*s).count += ((NI) 1);
		}
		LA40_: ;
		{
			NIM_BOOL T46_;
			struct kevent T50_;
			NI T51_;
			T46_ = (NIM_BOOL)0;
			T46_ = !((((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0));
			if (!(T46_)) goto LA47_;
			T46_ = ((events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0);
			LA47_: ;
			if (!T46_) goto LA48_;
			nimZeroMem((void*)(&T50_), sizeof(struct kevent));
			T50_.ident = ((NU) (fdi));
			T50_.filter = ((short) -2);
			T50_.flags = ((unsigned short) 1);
			T50_.fflags = ((unsigned int) 0);
			T50_.data = ((NI) 0);
			T50_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T51_ = (*s).changes->Sup.len++;
			(*s).changes->data[T51_] = T50_;
			(*s).count += ((NI) 1);
		}
		LA48_: ;
		T52_ = ((*s).changes ? (*s).changes->Sup.len : 0);
		lengthX60gensym70_ = ((int) (T52_));
		{
			if (!(((NI32) 0) < lengthX60gensym70_)) goto LA55_;
			{
				int T59_;
				int T60_;
				NI32 T63_;
				T59_ = (int)0;
				T59_ = (*s).kqFD;
				T60_ = (int)0;
				T60_ = kevent(T59_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym70_, NIM_NIL, ((int) 0), NIM_NIL);
				if (!(T60_ == ((NI32) -1))) goto LA61_;
				T63_ = (NI32)0;
				T63_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T63_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA61_: ;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
		}
		LA55_: ;
		(*pkey).events = events;
	}
	LA18_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, registerHandle__ZYhOzv5t2STtQzaUjaj1Lw)(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ* s, int fd, tySet_tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg events, tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA data) {
	NI fdi;
	tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw* skeyX60gensym13_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	fdi = ((NI) (fd));
	{
		if (!((*s).maxFD <= fdi)) goto LA3_;
		raiseIOSelectorsError__DsOWi00vXgEmCXwnjpsJhw(((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_12));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA3_: ;
	{
		if (!!(((*s).fds->data[fdi].ident == ((NI) -1)))) goto LA7_;
		failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A(((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_18));
	}
	LA7_: ;
	skeyX60gensym13_ = (&(*s).fds->data[fdi]);
	(*skeyX60gensym13_).ident = fdi;
	(*skeyX60gensym13_).events = events;
	(*skeyX60gensym13_).param = ((NI) 0);
	genericSeqAssign((&(*skeyX60gensym13_).data.readList), data.readList, (&NTI__mqHCvcswroDetkzsL3ixtg_));
	genericSeqAssign((&(*skeyX60gensym13_).data.writeList), data.writeList, (&NTI__mqHCvcswroDetkzsL3ixtg_));
	{
		int lengthX60gensym16_;
		NI T25_;
		if (!!((events == 0))) goto LA11_;
		{
			struct kevent T17_;
			NI T18_;
			if (!((events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0)) goto LA15_;
			nimZeroMem((void*)(&T17_), sizeof(struct kevent));
			T17_.ident = ((NU) (fdi));
			T17_.filter = ((short) -1);
			T17_.flags = ((unsigned short) 1);
			T17_.fflags = ((unsigned int) 0);
			T17_.data = ((NI) 0);
			T17_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T18_ = (*s).changes->Sup.len++;
			(*s).changes->data[T18_] = T17_;
			(*s).count += ((NI) 1);
		}
		LA15_: ;
		{
			struct kevent T23_;
			NI T24_;
			if (!((events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0)) goto LA21_;
			nimZeroMem((void*)(&T23_), sizeof(struct kevent));
			T23_.ident = ((NU) (fdi));
			T23_.filter = ((short) -2);
			T23_.flags = ((unsigned short) 1);
			T23_.fflags = ((unsigned int) 0);
			T23_.data = ((NI) 0);
			T23_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T24_ = (*s).changes->Sup.len++;
			(*s).changes->data[T24_] = T23_;
			(*s).count += ((NI) 1);
		}
		LA21_: ;
		T25_ = ((*s).changes ? (*s).changes->Sup.len : 0);
		lengthX60gensym16_ = ((int) (T25_));
		{
			if (!(((NI32) 0) < lengthX60gensym16_)) goto LA28_;
			{
				int T32_;
				int T33_;
				NI32 T36_;
				T32_ = (int)0;
				T32_ = (*s).kqFD;
				T33_ = (int)0;
				T33_ = kevent(T32_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym16_, NIM_NIL, ((int) 0), NIM_NIL);
				if (!(T33_ == ((NI32) -1))) goto LA34_;
				T36_ = (NI32)0;
				T36_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T36_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA34_: ;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
		}
		LA28_: ;
	}
	LA11_: ;
	}BeforeRet_: ;
}
static N_INLINE(NIM_BOOL, contains__fNhZDn5n0fjsgTdeG4k9a9bgselectors)(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ* s, NI fd) {
	NIM_BOOL result;
{	result = (NIM_BOOL)0;
	result = !(((*s).fds->data[fd].ident == ((NI) -1)));
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA*, getData__1sIMsZhnYKNp5lF429c225Q)(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ* s, int fd) {
	tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA* result;
	NI fdi;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA*)0;
	fdi = ((NI) (fd));
	{
		if (!((*s).maxFD <= fdi)) goto LA3_;
		raiseIOSelectorsError__DsOWi00vXgEmCXwnjpsJhw(((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_12));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA3_: ;
	{
		NIM_BOOL T7_;
		T7_ = (NIM_BOOL)0;
		T7_ = contains__fNhZDn5n0fjsgTdeG4k9a9bgselectors(s, fdi);
		if (!T7_) goto LA8_;
		result = (&(*s).fds->data[fdi].data);
	}
	LA8_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, unregister__XvANr0Db4lHwmahGhLXGPQ)(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ* s, int fd) {
	NI fdi;
	tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw* pkey;
	tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA emptyX60gensym42_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	fdi = ((NI) (fd));
	{
		if (!((*s).maxFD <= fdi)) goto LA3_;
		raiseIOSelectorsError__DsOWi00vXgEmCXwnjpsJhw(((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_12));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA3_: ;
	pkey = (&(*s).fds->data[fdi]);
	{
		NimStringDesc* T9_;
		NimStringDesc* T10_;
		if (!!(!(((*pkey).ident == ((NI) -1))))) goto LA7_;
		T9_ = (NimStringDesc*)0;
		T10_ = (NimStringDesc*)0;
		T10_ = nimIntToStr(fdi);
		T9_ = rawNewString((T10_ ? T10_->Sup.len : 0) + 113);
appendString(T9_, ((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_13));
appendString(T9_, T10_);
appendString(T9_, ((NimStringDesc*) &TM__ln5vuDpFyDrAqQbYD2g52Q_14));
		failedAssertImpl__W9cjVocn1tjhW7p7xohJj6A(T9_);
	}
	LA7_: ;
	{
		if (!!(((*pkey).events == 0))) goto LA13_;
		{
			int lengthX60gensym24_;
			NI T31_;
			if (!!((((*pkey).events & 3) == 0))) goto LA17_;
			{
				struct kevent T23_;
				NI T24_;
				if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 0))&31U)))!=0)) goto LA21_;
				nimZeroMem((void*)(&T23_), sizeof(struct kevent));
				T23_.ident = ((NU) (fdi));
				T23_.filter = ((short) -1);
				T23_.flags = ((unsigned short) 2);
				T23_.fflags = ((unsigned int) 0);
				T23_.data = ((NI) 0);
				T23_.udata = NIM_NIL;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
				T24_ = (*s).changes->Sup.len++;
				(*s).changes->data[T24_] = T23_;
				(*s).count -= ((NI) 1);
			}
			LA21_: ;
			{
				struct kevent T29_;
				NI T30_;
				if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 1))&31U)))!=0)) goto LA27_;
				nimZeroMem((void*)(&T29_), sizeof(struct kevent));
				T29_.ident = ((NU) (fdi));
				T29_.filter = ((short) -2);
				T29_.flags = ((unsigned short) 2);
				T29_.fflags = ((unsigned int) 0);
				T29_.data = ((NI) 0);
				T29_.udata = NIM_NIL;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
				T30_ = (*s).changes->Sup.len++;
				(*s).changes->data[T30_] = T29_;
				(*s).count -= ((NI) 1);
			}
			LA27_: ;
			T31_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			lengthX60gensym24_ = ((int) (T31_));
			{
				if (!(((NI32) 0) < lengthX60gensym24_)) goto LA34_;
				{
					int T38_;
					int T39_;
					NI32 T42_;
					T38_ = (int)0;
					T38_ = (*s).kqFD;
					T39_ = (int)0;
					T39_ = kevent(T38_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym24_, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T39_ == ((NI32) -1))) goto LA40_;
					T42_ = (NI32)0;
					T42_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
					raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T42_);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA40_: ;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
			}
			LA34_: ;
		}
		goto LA15_;
		LA17_: ;
		{
			if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 2))&31U)))!=0)) goto LA44_;
			{
				struct kevent T50_;
				NI T51_;
				int lengthX60gensym27_;
				NI T52_;
				if (!!((((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 9))&31U)))!=0))) goto LA48_;
				nimZeroMem((void*)(&T50_), sizeof(struct kevent));
				T50_.ident = ((NU) (fdi));
				T50_.filter = ((short) -7);
				T50_.flags = ((unsigned short) 2);
				T50_.fflags = ((unsigned int) 0);
				T50_.data = ((NI) 0);
				T50_.udata = NIM_NIL;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
				T51_ = (*s).changes->Sup.len++;
				(*s).changes->data[T51_] = T50_;
				T52_ = ((*s).changes ? (*s).changes->Sup.len : 0);
				lengthX60gensym27_ = ((int) (T52_));
				{
					if (!(((NI32) 0) < lengthX60gensym27_)) goto LA55_;
					{
						int T59_;
						int T60_;
						NI32 T63_;
						T59_ = (int)0;
						T59_ = (*s).kqFD;
						T60_ = (int)0;
						T60_ = kevent(T59_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym27_, NIM_NIL, ((int) 0), NIM_NIL);
						if (!(T60_ == ((NI32) -1))) goto LA61_;
						T63_ = (NI32)0;
						T63_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
						raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T63_);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
					LA61_: ;
					(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
				}
				LA55_: ;
				(*s).count -= ((NI) 1);
			}
			LA48_: ;
			{
				int T66_;
				NI32 T69_;
				T66_ = (int)0;
				T66_ = close(((int) ((*pkey).ident)));
				if (!!((T66_ == ((NI32) 0)))) goto LA67_;
				T69_ = (NI32)0;
				T69_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T69_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA67_: ;
		}
		goto LA15_;
		LA44_: ;
		{
			sigset_t nmask;
			sigset_t omask;
			int signal_1;
			int T73_;
			int T74_;
			int T75_;
			struct kevent T82_;
			NI T83_;
			int lengthX60gensym31_;
			NI T84_;
			if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 3))&31U)))!=0)) goto LA71_;
			nimZeroMem((void*)(&nmask), sizeof(sigset_t));
			nimZeroMem((void*)(&omask), sizeof(sigset_t));
			signal_1 = ((int) ((*pkey).param));
			T73_ = (int)0;
			T73_ = sigemptyset((&nmask));
			(void)(T73_);
			T74_ = (int)0;
			T74_ = sigemptyset((&omask));
			(void)(T74_);
			T75_ = (int)0;
			T75_ = sigaddset((&nmask), signal_1);
			(void)(T75_);
			{
				int T78_;
				NI32 T81_;
				T78_ = (int)0;
				T78_ = sigprocmask(SIG_UNBLOCK, (&nmask), (&omask));
				if (!(T78_ == ((NI32) -1))) goto LA79_;
				T81_ = (NI32)0;
				T81_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T81_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA79_: ;
			signal(signal_1, ((tyProc__ZEo3s9cIqJYP74f7GMZM2FA) 0));
			nimZeroMem((void*)(&T82_), sizeof(struct kevent));
			T82_.ident = ((NU) ((*pkey).param));
			T82_.filter = ((short) -6);
			T82_.flags = ((unsigned short) 2);
			T82_.fflags = ((unsigned int) 0);
			T82_.data = ((NI) 0);
			T82_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T83_ = (*s).changes->Sup.len++;
			(*s).changes->data[T83_] = T82_;
			T84_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			lengthX60gensym31_ = ((int) (T84_));
			{
				if (!(((NI32) 0) < lengthX60gensym31_)) goto LA87_;
				{
					int T91_;
					int T92_;
					NI32 T95_;
					T91_ = (int)0;
					T91_ = (*s).kqFD;
					T92_ = (int)0;
					T92_ = kevent(T91_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym31_, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T92_ == ((NI32) -1))) goto LA93_;
					T95_ = (NI32)0;
					T95_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
					raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T95_);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA93_: ;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
			}
			LA87_: ;
			(*s).count -= ((NI) 1);
			{
				int T98_;
				NI32 T101_;
				T98_ = (int)0;
				T98_ = close(((int) ((*pkey).ident)));
				if (!!((T98_ == ((NI32) 0)))) goto LA99_;
				T101_ = (NI32)0;
				T101_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T101_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA99_: ;
		}
		goto LA15_;
		LA71_: ;
		{
			if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 4))&31U)))!=0)) goto LA103_;
			{
				struct kevent T109_;
				NI T110_;
				int lengthX60gensym34_;
				NI T111_;
				if (!!((((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 9))&31U)))!=0))) goto LA107_;
				nimZeroMem((void*)(&T109_), sizeof(struct kevent));
				T109_.ident = ((NU) ((*pkey).param));
				T109_.filter = ((short) -5);
				T109_.flags = ((unsigned short) 2);
				T109_.fflags = ((unsigned int) 0);
				T109_.data = ((NI) 0);
				T109_.udata = NIM_NIL;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
				T110_ = (*s).changes->Sup.len++;
				(*s).changes->data[T110_] = T109_;
				T111_ = ((*s).changes ? (*s).changes->Sup.len : 0);
				lengthX60gensym34_ = ((int) (T111_));
				{
					if (!(((NI32) 0) < lengthX60gensym34_)) goto LA114_;
					{
						int T118_;
						int T119_;
						NI32 T122_;
						T118_ = (int)0;
						T118_ = (*s).kqFD;
						T119_ = (int)0;
						T119_ = kevent(T118_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym34_, NIM_NIL, ((int) 0), NIM_NIL);
						if (!(T119_ == ((NI32) -1))) goto LA120_;
						T122_ = (NI32)0;
						T122_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
						raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T122_);
						if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					}
					LA120_: ;
					(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
				}
				LA114_: ;
				(*s).count -= ((NI) 1);
			}
			LA107_: ;
			{
				int T125_;
				NI32 T128_;
				T125_ = (int)0;
				T125_ = close(((int) ((*pkey).ident)));
				if (!!((T125_ == ((NI32) 0)))) goto LA126_;
				T128_ = (NI32)0;
				T128_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T128_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA126_: ;
		}
		goto LA15_;
		LA103_: ;
		{
			struct kevent T132_;
			NI T133_;
			int lengthX60gensym37_;
			NI T134_;
			if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 5))&31U)))!=0)) goto LA130_;
			nimZeroMem((void*)(&T132_), sizeof(struct kevent));
			T132_.ident = ((NU) (fdi));
			T132_.filter = ((short) -4);
			T132_.flags = ((unsigned short) 2);
			T132_.fflags = ((unsigned int) 0);
			T132_.data = ((NI) 0);
			T132_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T133_ = (*s).changes->Sup.len++;
			(*s).changes->data[T133_] = T132_;
			T134_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			lengthX60gensym37_ = ((int) (T134_));
			{
				if (!(((NI32) 0) < lengthX60gensym37_)) goto LA137_;
				{
					int T141_;
					int T142_;
					NI32 T145_;
					T141_ = (int)0;
					T141_ = (*s).kqFD;
					T142_ = (int)0;
					T142_ = kevent(T141_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym37_, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T142_ == ((NI32) -1))) goto LA143_;
					T145_ = (NI32)0;
					T145_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
					raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T145_);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA143_: ;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
			}
			LA137_: ;
			(*s).count -= ((NI) 1);
		}
		goto LA15_;
		LA130_: ;
		{
			struct kevent T149_;
			NI T150_;
			int lengthX60gensym40_;
			NI T151_;
			if (!(((*pkey).events &((NU32)1<<((NU)(((tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg) 6))&31U)))!=0)) goto LA147_;
			nimZeroMem((void*)(&T149_), sizeof(struct kevent));
			T149_.ident = ((NU) (fdi));
			T149_.filter = ((short) -1);
			T149_.flags = ((unsigned short) 2);
			T149_.fflags = ((unsigned int) 0);
			T149_.data = ((NI) 0);
			T149_.udata = NIM_NIL;
			(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) incrSeqV3((TGenericSeq*)((*s).changes), (&NTI__aFT14fmnUl0dbEzr23F30g_));
			T150_ = (*s).changes->Sup.len++;
			(*s).changes->data[T150_] = T149_;
			T151_ = ((*s).changes ? (*s).changes->Sup.len : 0);
			lengthX60gensym40_ = ((int) (T151_));
			{
				if (!(((NI32) 0) < lengthX60gensym40_)) goto LA154_;
				{
					int T158_;
					int T159_;
					NI32 T162_;
					T158_ = (int)0;
					T158_ = (*s).kqFD;
					T159_ = (int)0;
					T159_ = kevent(T158_, (&(*s).changes->data[((NI) 0)]), lengthX60gensym40_, NIM_NIL, ((int) 0), NIM_NIL);
					if (!(T159_ == ((NI32) -1))) goto LA160_;
					T162_ = (NI32)0;
					T162_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
					raiseIOSelectorsError__E2YyF3Q0SipazWf0jnjh7w(T162_);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				}
				LA160_: ;
				(*s).changes = (tySequence__aFT14fmnUl0dbEzr23F30g*) setLengthSeqV2(&((*s).changes)->Sup, (&NTI__aFT14fmnUl0dbEzr23F30g_), ((NI) 0));
			}
			LA154_: ;
			(*s).count -= ((NI) 1);
		}
		goto LA15_;
		LA147_: ;
		LA15_: ;
	}
	LA13_: ;
	nimZeroMem((void*)(&emptyX60gensym42_), sizeof(tyObject_AsyncData__hOYUN4IOpj9adMwn6W7S2VA));
	(*pkey).ident = ((NI) -1);
	(*pkey).events = 0;
	genericSeqAssign((&(*pkey).data.readList), emptyX60gensym42_.readList, (&NTI__mqHCvcswroDetkzsL3ixtg_));
	genericSeqAssign((&(*pkey).data.writeList), emptyX60gensym42_.writeList, (&NTI__mqHCvcswroDetkzsL3ixtg_));
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, stdlib_selectorsDatInit000)(void) {

/* section: NIM_merge_TYPE_INIT1 */
static TNimNode* TM__ln5vuDpFyDrAqQbYD2g52Q_2_6[6];
static TNimNode* TM__ln5vuDpFyDrAqQbYD2g52Q_3_4[4];
static TNimNode* TM__ln5vuDpFyDrAqQbYD2g52Q_4_17[17];
NI TM__ln5vuDpFyDrAqQbYD2g52Q_6;
static char* NIM_CONST TM__ln5vuDpFyDrAqQbYD2g52Q_5[17] = {
"Read", 
"Write", 
"Timer", 
"Signal", 
"Process", 
"Vnode", 
"User", 
"Error", 
"Oneshot", 
"Finished", 
"VnodeWrite", 
"VnodeDelete", 
"VnodeExtend", 
"VnodeAttrib", 
"VnodeLink", 
"VnodeRename", 
"VnodeRevoke"};
static TNimNode TM__ln5vuDpFyDrAqQbYD2g52Q_0[32];

/* section: NIM_merge_TYPE_INIT3 */
NTI__jkoZicTBtYdKkYck5SFJEQ_.size = sizeof(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ);
NTI__jkoZicTBtYdKkYck5SFJEQ_.align = NIM_ALIGNOF(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ);
NTI__jkoZicTBtYdKkYck5SFJEQ_.kind = 18;
NTI__jkoZicTBtYdKkYck5SFJEQ_.base = 0;
TM__ln5vuDpFyDrAqQbYD2g52Q_2_6[0] = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[1];
TM__ln5vuDpFyDrAqQbYD2g52Q_0[1].kind = 1;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[1].offset = offsetof(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ, kqFD);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[1].typ = (&NTI__nlCscttRCss70IBTyuBqnA_);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[1].name = "kqFD";
TM__ln5vuDpFyDrAqQbYD2g52Q_2_6[1] = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[2];
TM__ln5vuDpFyDrAqQbYD2g52Q_0[2].kind = 1;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[2].offset = offsetof(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ, maxFD);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[2].typ = (&NTI__rR5Bzr1D5krxoo1NcNyeMA_);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[2].name = "maxFD";
TM__ln5vuDpFyDrAqQbYD2g52Q_2_6[2] = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[3];
NTI__aFT14fmnUl0dbEzr23F30g_.size = sizeof(tySequence__aFT14fmnUl0dbEzr23F30g*);
NTI__aFT14fmnUl0dbEzr23F30g_.align = NIM_ALIGNOF(tySequence__aFT14fmnUl0dbEzr23F30g*);
NTI__aFT14fmnUl0dbEzr23F30g_.kind = 24;
NTI__aFT14fmnUl0dbEzr23F30g_.base = (&NTI__9cG9coEVt8bUEuxUupPPZigQ_);
NTI__aFT14fmnUl0dbEzr23F30g_.flags = 2;
NTI__aFT14fmnUl0dbEzr23F30g_.marker = Marker_tySequence__aFT14fmnUl0dbEzr23F30g;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[3].kind = 1;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[3].offset = offsetof(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ, changes);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[3].typ = (&NTI__aFT14fmnUl0dbEzr23F30g_);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[3].name = "changes";
TM__ln5vuDpFyDrAqQbYD2g52Q_2_6[3] = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[4];
NTI__561GPxg10TdJiEAAWoraPw_.size = sizeof(tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw);
NTI__561GPxg10TdJiEAAWoraPw_.align = NIM_ALIGNOF(tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw);
NTI__561GPxg10TdJiEAAWoraPw_.kind = 18;
NTI__561GPxg10TdJiEAAWoraPw_.base = 0;
TM__ln5vuDpFyDrAqQbYD2g52Q_3_4[0] = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[6];
TM__ln5vuDpFyDrAqQbYD2g52Q_0[6].kind = 1;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[6].offset = offsetof(tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw, ident);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[6].typ = (&NTI__rR5Bzr1D5krxoo1NcNyeMA_);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[6].name = "ident";
TM__ln5vuDpFyDrAqQbYD2g52Q_3_4[1] = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[7];
NTI__nI40bZzTyYVrl763dZ9aHDg_.size = sizeof(tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg);
NTI__nI40bZzTyYVrl763dZ9aHDg_.align = NIM_ALIGNOF(tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg);
NTI__nI40bZzTyYVrl763dZ9aHDg_.kind = 14;
NTI__nI40bZzTyYVrl763dZ9aHDg_.base = 0;
NTI__nI40bZzTyYVrl763dZ9aHDg_.flags = 3;
for (TM__ln5vuDpFyDrAqQbYD2g52Q_6 = 0; TM__ln5vuDpFyDrAqQbYD2g52Q_6 < 17; TM__ln5vuDpFyDrAqQbYD2g52Q_6++) {
TM__ln5vuDpFyDrAqQbYD2g52Q_0[TM__ln5vuDpFyDrAqQbYD2g52Q_6+8].kind = 1;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[TM__ln5vuDpFyDrAqQbYD2g52Q_6+8].offset = TM__ln5vuDpFyDrAqQbYD2g52Q_6;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[TM__ln5vuDpFyDrAqQbYD2g52Q_6+8].name = TM__ln5vuDpFyDrAqQbYD2g52Q_5[TM__ln5vuDpFyDrAqQbYD2g52Q_6];
TM__ln5vuDpFyDrAqQbYD2g52Q_4_17[TM__ln5vuDpFyDrAqQbYD2g52Q_6] = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[TM__ln5vuDpFyDrAqQbYD2g52Q_6+8];
}
TM__ln5vuDpFyDrAqQbYD2g52Q_0[25].len = 17; TM__ln5vuDpFyDrAqQbYD2g52Q_0[25].kind = 2; TM__ln5vuDpFyDrAqQbYD2g52Q_0[25].sons = &TM__ln5vuDpFyDrAqQbYD2g52Q_4_17[0];
NTI__nI40bZzTyYVrl763dZ9aHDg_.node = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[25];
NTI__YIRsZrDT89buh37M5yeUgng_.size = sizeof(tySet_tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg);
NTI__YIRsZrDT89buh37M5yeUgng_.align = NIM_ALIGNOF(tySet_tyEnum_Event__nI40bZzTyYVrl763dZ9aHDg);
NTI__YIRsZrDT89buh37M5yeUgng_.kind = 19;
NTI__YIRsZrDT89buh37M5yeUgng_.base = (&NTI__nI40bZzTyYVrl763dZ9aHDg_);
NTI__YIRsZrDT89buh37M5yeUgng_.flags = 3;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[26].len = 0; TM__ln5vuDpFyDrAqQbYD2g52Q_0[26].kind = 0;
NTI__YIRsZrDT89buh37M5yeUgng_.node = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[26];
TM__ln5vuDpFyDrAqQbYD2g52Q_0[7].kind = 1;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[7].offset = offsetof(tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw, events);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[7].typ = (&NTI__YIRsZrDT89buh37M5yeUgng_);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[7].name = "events";
TM__ln5vuDpFyDrAqQbYD2g52Q_3_4[2] = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[27];
TM__ln5vuDpFyDrAqQbYD2g52Q_0[27].kind = 1;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[27].offset = offsetof(tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw, param);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[27].typ = (&NTI__rR5Bzr1D5krxoo1NcNyeMA_);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[27].name = "param";
TM__ln5vuDpFyDrAqQbYD2g52Q_3_4[3] = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[28];
TM__ln5vuDpFyDrAqQbYD2g52Q_0[28].kind = 1;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[28].offset = offsetof(tyObject_SelectorKey__561GPxg10TdJiEAAWoraPw, data);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[28].typ = (&NTI__hOYUN4IOpj9adMwn6W7S2VA_);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[28].name = "data";
TM__ln5vuDpFyDrAqQbYD2g52Q_0[5].len = 4; TM__ln5vuDpFyDrAqQbYD2g52Q_0[5].kind = 2; TM__ln5vuDpFyDrAqQbYD2g52Q_0[5].sons = &TM__ln5vuDpFyDrAqQbYD2g52Q_3_4[0];
NTI__561GPxg10TdJiEAAWoraPw_.node = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[5];
NTI__5L9b5Ztm9adPEys1vE9cEPQJA_.size = sizeof(tySequence__5L9b5Ztm9adPEys1vE9cEPQJA*);
NTI__5L9b5Ztm9adPEys1vE9cEPQJA_.align = NIM_ALIGNOF(tySequence__5L9b5Ztm9adPEys1vE9cEPQJA*);
NTI__5L9b5Ztm9adPEys1vE9cEPQJA_.kind = 24;
NTI__5L9b5Ztm9adPEys1vE9cEPQJA_.base = (&NTI__561GPxg10TdJiEAAWoraPw_);
NTI__5L9b5Ztm9adPEys1vE9cEPQJA_.marker = Marker_tySequence__5L9b5Ztm9adPEys1vE9cEPQJA;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[4].kind = 1;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[4].offset = offsetof(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ, fds);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[4].typ = (&NTI__5L9b5Ztm9adPEys1vE9cEPQJA_);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[4].name = "fds";
TM__ln5vuDpFyDrAqQbYD2g52Q_2_6[4] = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[29];
TM__ln5vuDpFyDrAqQbYD2g52Q_0[29].kind = 1;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[29].offset = offsetof(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ, count);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[29].typ = (&NTI__rR5Bzr1D5krxoo1NcNyeMA_);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[29].name = "count";
TM__ln5vuDpFyDrAqQbYD2g52Q_2_6[5] = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[30];
TM__ln5vuDpFyDrAqQbYD2g52Q_0[30].kind = 1;
TM__ln5vuDpFyDrAqQbYD2g52Q_0[30].offset = offsetof(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ, sock);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[30].typ = (&NTI__nlCscttRCss70IBTyuBqnA_);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[30].name = "sock";
TM__ln5vuDpFyDrAqQbYD2g52Q_0[0].len = 6; TM__ln5vuDpFyDrAqQbYD2g52Q_0[0].kind = 2; TM__ln5vuDpFyDrAqQbYD2g52Q_0[0].sons = &TM__ln5vuDpFyDrAqQbYD2g52Q_2_6[0];
NTI__jkoZicTBtYdKkYck5SFJEQ_.node = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[0];
NTI__Y5hK0M9cL3lXwccEV9cgR9cQw_.size = sizeof(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ*);
NTI__Y5hK0M9cL3lXwccEV9cgR9cQw_.align = NIM_ALIGNOF(tyObject_SelectorImpl__jkoZicTBtYdKkYck5SFJEQ*);
NTI__Y5hK0M9cL3lXwccEV9cgR9cQw_.kind = 22;
NTI__Y5hK0M9cL3lXwccEV9cgR9cQw_.base = (&NTI__jkoZicTBtYdKkYck5SFJEQ_);
NTI__Y5hK0M9cL3lXwccEV9cgR9cQw_.marker = Marker_tyRef__Y5hK0M9cL3lXwccEV9cgR9cQw;
NTI__W6GmT4FRSGpTsHizSNfKpA_.size = sizeof(tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA);
NTI__W6GmT4FRSGpTsHizSNfKpA_.align = NIM_ALIGNOF(tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA);
NTI__W6GmT4FRSGpTsHizSNfKpA_.kind = 17;
NTI__W6GmT4FRSGpTsHizSNfKpA_.base = (&NTI__qrLSDoe2oBoAqNtJ9badtnA_);
TM__ln5vuDpFyDrAqQbYD2g52Q_0[31].len = 0; TM__ln5vuDpFyDrAqQbYD2g52Q_0[31].kind = 2;
NTI__W6GmT4FRSGpTsHizSNfKpA_.node = &TM__ln5vuDpFyDrAqQbYD2g52Q_0[31];
NTI__tNpnIL9cOkrikfe5IwGl77A_.size = sizeof(tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA*);
NTI__tNpnIL9cOkrikfe5IwGl77A_.align = NIM_ALIGNOF(tyObject_IOSelectorsException__W6GmT4FRSGpTsHizSNfKpA*);
NTI__tNpnIL9cOkrikfe5IwGl77A_.kind = 22;
NTI__tNpnIL9cOkrikfe5IwGl77A_.base = (&NTI__W6GmT4FRSGpTsHizSNfKpA_);
NTI__tNpnIL9cOkrikfe5IwGl77A_.marker = Marker_tyRef__tNpnIL9cOkrikfe5IwGl77A;
}

