/* Generated by Nim Compiler v1.4.0 */
/*   (c) 2020 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64

/* section: NIM_merge_HEADERS */

#include "nimbase.h"
#include <string.h>
#include <windows.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix

/* section: NIM_merge_FRAME_DEFINES */
#define nimfr_(x, y)
#define nimln_(x, y)

/* section: NIM_merge_FORWARD_TYPES */
typedef struct tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct tyObject_GcThread__hgJQSlfXDOK3SwSHjeZBXg tyObject_GcThread__hgJQSlfXDOK3SwSHjeZBXg;
typedef struct tyObject_FuturecolonObjectType___DytvWkqCHojL9aGfYktbFPw tyObject_FuturecolonObjectType___DytvWkqCHojL9aGfYktbFPw;
typedef struct tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA;
typedef struct RootObj RootObj;
typedef struct tyObject_CustomObj__wOFBYsZJQSZkVC4sY27sow tyObject_CustomObj__wOFBYsZJQSZkVC4sY27sow;
typedef struct tyObject_CompletionData__ofDIV6JNvBhV7dQ0MjrTQg tyObject_CompletionData__ofDIV6JNvBhV7dQ0MjrTQg;
typedef struct tyObject_ForeignCell__wAIfO0McG3N1TIBYCy0ltw tyObject_ForeignCell__wAIfO0McG3N1TIBYCy0ltw;
typedef struct tyObject_GcHeap__1TRH1TZMaVZTnLNcIHuNFQ tyObject_GcHeap__1TRH1TZMaVZTnLNcIHuNFQ;
typedef struct tyObject_OVERLAPPED__9ayhTq9cybD7eA9aZA09akSNXg tyObject_OVERLAPPED__9ayhTq9cybD7eA9aZA09akSNXg;
typedef struct Exception Exception;
typedef struct tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA;
typedef struct tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA;
typedef struct tySequence__uB9b75OUPRENsBAu4AnoePA tySequence__uB9b75OUPRENsBAu4AnoePA;
typedef struct tyObject_FutureBasecolonObjectType___NMMT5akQkfNlmjYrVF9a9bwA tyObject_FutureBasecolonObjectType___NMMT5akQkfNlmjYrVF9a9bwA;
typedef struct tyObject_CallbackList__tKSBWiaJMWD3JZxwqg7UFQ tyObject_CallbackList__tKSBWiaJMWD3JZxwqg7UFQ;
typedef struct tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA;
typedef struct tySequence__aNpJjaoUowCQc7fBn3wtDQ tySequence__aNpJjaoUowCQc7fBn3wtDQ;
typedef struct TSafePoint TSafePoint;
typedef struct GcFrameHeader GcFrameHeader;
typedef struct tyObject_GcStack__7fytPA5bBsob6See21YMRA tyObject_GcStack__7fytPA5bBsob6See21YMRA;
typedef struct tyObject_CellSeq__Axo1XVm9aaQueTOldv8le5w tyObject_CellSeq__Axo1XVm9aaQueTOldv8le5w;
typedef struct tyObject_Cell__1zcF9cV8XIAtbN8h5HRUB8g tyObject_Cell__1zcF9cV8XIAtbN8h5HRUB8g;
typedef struct tyObject_MemRegion__x81NhDv59b8ercDZ9bi85jyg tyObject_MemRegion__x81NhDv59b8ercDZ9bi85jyg;
typedef struct tyObject_SmallChunk__tXn60W2f8h3jgAYdEmy5NQ tyObject_SmallChunk__tXn60W2f8h3jgAYdEmy5NQ;
typedef struct tyObject_BigChunk__Rv9c70Uhp2TytkX7eH78qEg tyObject_BigChunk__Rv9c70Uhp2TytkX7eH78qEg;
typedef struct tyObject_LLChunk__XsENErzHIZV9bhvyJx56wGw tyObject_LLChunk__XsENErzHIZV9bhvyJx56wGw;
typedef struct tyObject_IntSet__EZObFrE3NC9bIb3YMkY9crZA tyObject_IntSet__EZObFrE3NC9bIb3YMkY9crZA;
typedef struct tyObject_Trunk__W0r8S0Y3UGke6T9bIUWnnuw tyObject_Trunk__W0r8S0Y3UGke6T9bIUWnnuw;
typedef struct tyObject_AvlNode__IaqjtwKhxLEpvDS9bct9blEw tyObject_AvlNode__IaqjtwKhxLEpvDS9bct9blEw;
typedef struct tyObject_HeapLinks__PDV1HBZ8CQSQJC9aOBFNRSg tyObject_HeapLinks__PDV1HBZ8CQSQJC9aOBFNRSg;
typedef struct tyTuple__ujsjpB2O9cjj3uDHsXbnSzg tyTuple__ujsjpB2O9cjj3uDHsXbnSzg;
typedef struct tyObject_GcStat__0RwLoVBHZPfUAcLczmfQAg tyObject_GcStat__0RwLoVBHZPfUAcLczmfQAg;
typedef struct tyObject_SharedList__JI9cx34TL8n3aOKF6tSMBUw tyObject_SharedList__JI9cx34TL8n3aOKF6tSMBUw;
typedef struct tyObject_SharedListNodecolonObjectType___KGw0YAw6W9aSz3Sr9aXGu7zg tyObject_SharedListNodecolonObjectType___KGw0YAw6W9aSz3Sr9aXGu7zg;
typedef struct tyObject_TimezonecolonObjectType___F8OvqlxXyGXRSiK9c1fCDVw tyObject_TimezonecolonObjectType___F8OvqlxXyGXRSiK9c1fCDVw;
typedef struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ tySequence__sM4lkSb7zS6F7OVMvW9cffQ;
typedef struct tyObject_PDispatchercolonObjectType___mNiwh37MfaAP9cG4kqT6kpg tyObject_PDispatchercolonObjectType___mNiwh37MfaAP9cG4kqT6kpg;
typedef struct tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w;

/* section: NIM_merge_TYPES */
struct tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w {
NI fd;
NI64 offset;
};
typedef NU8 tyEnum_TNimKind__jIBKr1ejBgsfM33Kxw4j7A;
typedef NU8 tySet_tyEnum_TNimTypeFlag__v8QUszD1sWlSIWZz7mC4bQ;
typedef N_NIMCALL_PTR(void, tyProc__ojoeKfW4VYIm36I9cpDTQIg) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, tyProc__WSm2xU5ARYv9aAR4l0z9c9auQ) (void* p);
struct TNimType {
NI size;
NI align;
tyEnum_TNimKind__jIBKr1ejBgsfM33Kxw4j7A kind;
tySet_tyEnum_TNimTypeFlag__v8QUszD1sWlSIWZz7mC4bQ flags;
TNimType* base;
TNimNode* node;
void* finalizer;
tyProc__ojoeKfW4VYIm36I9cpDTQIg marker;
tyProc__WSm2xU5ARYv9aAR4l0z9c9auQ deepcopy;
};
typedef NU8 tyEnum_TNimNodeKind__unfNsxrcATrufDZmpBq4HQ;
struct TNimNode {
tyEnum_TNimNodeKind__unfNsxrcATrufDZmpBq4HQ kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct TGenericSeq {
NI len;
NI reserved;
};
struct NimStringDesc {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
typedef NU8 tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg;
typedef N_STDCALL_PTR(NI, tyProc__A2Q4AG9aesAd2D8S5BP4y2g) (NI16* lpFileName, NI32 dwDesiredAccess, NI32 dwShareMode, void* lpSecurityAttributes, NI32 dwCreationDisposition, NI32 dwFlagsAndAttributes, NI hTemplateFile);
typedef NF tyArray__iV2wVpdhi9coq9cstlcqapXg[2001];
struct tyObject_GcThread__hgJQSlfXDOK3SwSHjeZBXg {
tyArray__iV2wVpdhi9coq9cstlcqapXg tls;
};
typedef N_STDCALL_PTR(NI32, tyProc__I8CYTKrqz0DV8EyysIRhJw) (NI hFile, NI32* lpFileSizeHigh);
struct RootObj {
TNimType* m_type;
};
struct tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA {
  RootObj Sup;
NI colonstate_;
tyObject_FuturecolonObjectType___DytvWkqCHojL9aGfYktbFPw* retFuture1;
void* buffer2;
tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w* f3;
};
typedef struct {
N_NIMCALL_PTR(void, ClP_0) (NI fd, NI32 bytesTransferred, NI32 errcode, void* ClE_0);
void* ClE_0;
} tyProc__GKekuTsRDILRxgRrUzbgvQ;
struct tyObject_ForeignCell__wAIfO0McG3N1TIBYCy0ltw {
void* data;
tyObject_GcHeap__1TRH1TZMaVZTnLNcIHuNFQ* owner;
};
struct tyObject_CompletionData__ofDIV6JNvBhV7dQ0MjrTQg {
NI fd;
tyProc__GKekuTsRDILRxgRrUzbgvQ cb;
tyObject_ForeignCell__wAIfO0McG3N1TIBYCy0ltw cell;
};
struct tyObject_OVERLAPPED__9ayhTq9cybD7eA9aZA09akSNXg {
NI* internal;
NI* internalHigh;
NI32 offset;
NI32 offsetHigh;
NI hEvent;
};
struct tyObject_CustomObj__wOFBYsZJQSZkVC4sY27sow {
  tyObject_OVERLAPPED__9ayhTq9cybD7eA9aZA09akSNXg Sup;
tyObject_CompletionData__ofDIV6JNvBhV7dQ0MjrTQg data;
};
struct Exception {
  RootObj Sup;
Exception* parent;
NCSTRING name;
NimStringDesc* message;
tySequence__uB9b75OUPRENsBAu4AnoePA* trace;
Exception* up;
};
struct tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA {
  Exception Sup;
};
struct tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA {
  tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA Sup;
NI32 errorCode;
};
typedef N_STDCALL_PTR(NI32, tyProc__9ajZYMGL5GqiRFqiCC367oA) (NI hFile, void* buffer, NI32 nNumberOfBytesToRead, NI32* lpNumberOfBytesRead, void* lpOverlapped);
typedef N_STDCALL_PTR(NI32, tyProc__diSZYiv729b4Y9b8LJKB7MkA) (NI hFile, tyObject_OVERLAPPED__9ayhTq9cybD7eA9aZA09akSNXg* lpOverlapped, NI32* lpNumberOfBytesTransferred, NI32 bWait);
typedef struct {
N_NIMCALL_PTR(void, ClP_0) (void* ClE_0);
void* ClE_0;
} tyProc__HzVCwACFYM9cx9aV62PdjtuA;
struct tyObject_CallbackList__tKSBWiaJMWD3JZxwqg7UFQ {
tyProc__HzVCwACFYM9cx9aV62PdjtuA function;
tyObject_CallbackList__tKSBWiaJMWD3JZxwqg7UFQ* next;
};
struct tyObject_FutureBasecolonObjectType___NMMT5akQkfNlmjYrVF9a9bwA {
  RootObj Sup;
tyObject_CallbackList__tKSBWiaJMWD3JZxwqg7UFQ callbacks;
NIM_BOOL finished;
Exception* error;
NimStringDesc* errorStackTrace;
};
struct tyObject_FuturecolonObjectType___DytvWkqCHojL9aGfYktbFPw {
  tyObject_FutureBasecolonObjectType___NMMT5akQkfNlmjYrVF9a9bwA Sup;
NimStringDesc* value;
};
typedef N_STDCALL_PTR(NI32, tyProc__P13srMBg9b3d3yEV9aW4NCoA) (NI hObject);
struct tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA {
NCSTRING procname;
NI line;
NCSTRING filename;
};
typedef N_NIMCALL_PTR(NIM_BOOL, tyProc__9axCnCRMUx32AHzFgBrzSMg) (Exception* e);
struct tyObject_GcStack__7fytPA5bBsob6See21YMRA {
void* bottom;
};
struct tyObject_CellSeq__Axo1XVm9aaQueTOldv8le5w {
NI len;
NI cap;
tyObject_Cell__1zcF9cV8XIAtbN8h5HRUB8g** d;
};
typedef tyObject_SmallChunk__tXn60W2f8h3jgAYdEmy5NQ* tyArray__SPr7N6UKfuF549bNPiUvSRw[256];
typedef NU32 tyArray__BHbOSqU1t9b3Gt7K2c6fQig[24];
typedef tyObject_BigChunk__Rv9c70Uhp2TytkX7eH78qEg* tyArray__N1u1nqOgmuJN9cSZrnMHgOQ[32];
typedef tyArray__N1u1nqOgmuJN9cSZrnMHgOQ tyArray__B6durA4ZCi1xjJvRtyYxMg[24];
typedef tyObject_Trunk__W0r8S0Y3UGke6T9bIUWnnuw* tyArray__lh2A89ahMmYg9bCmpVaplLbA[256];
struct tyObject_IntSet__EZObFrE3NC9bIb3YMkY9crZA {
tyArray__lh2A89ahMmYg9bCmpVaplLbA data;
};
typedef tyObject_AvlNode__IaqjtwKhxLEpvDS9bct9blEw* tyArray__0aOLqZchNi8nWtMTi8ND8w[2];
struct tyObject_AvlNode__IaqjtwKhxLEpvDS9bct9blEw {
tyArray__0aOLqZchNi8nWtMTi8ND8w link;
NI key;
NI upperBound;
NI level;
};
struct tyTuple__ujsjpB2O9cjj3uDHsXbnSzg {
tyObject_BigChunk__Rv9c70Uhp2TytkX7eH78qEg* Field0;
NI Field1;
};
typedef tyTuple__ujsjpB2O9cjj3uDHsXbnSzg tyArray__LzOv2eCDGiceMKQstCLmhw[30];
struct tyObject_HeapLinks__PDV1HBZ8CQSQJC9aOBFNRSg {
NI len;
tyArray__LzOv2eCDGiceMKQstCLmhw chunks;
tyObject_HeapLinks__PDV1HBZ8CQSQJC9aOBFNRSg* next;
};
struct tyObject_MemRegion__x81NhDv59b8ercDZ9bi85jyg {
NI minLargeObj;
NI maxLargeObj;
tyArray__SPr7N6UKfuF549bNPiUvSRw freeSmallChunks;
NU32 flBitmap;
tyArray__BHbOSqU1t9b3Gt7K2c6fQig slBitmap;
tyArray__B6durA4ZCi1xjJvRtyYxMg matrix;
tyObject_LLChunk__XsENErzHIZV9bhvyJx56wGw* llmem;
NI currMem;
NI maxMem;
NI freeMem;
NI occ;
NI lastSize;
tyObject_IntSet__EZObFrE3NC9bIb3YMkY9crZA chunkStarts;
tyObject_AvlNode__IaqjtwKhxLEpvDS9bct9blEw* root;
tyObject_AvlNode__IaqjtwKhxLEpvDS9bct9blEw* deleted;
tyObject_AvlNode__IaqjtwKhxLEpvDS9bct9blEw* last;
tyObject_AvlNode__IaqjtwKhxLEpvDS9bct9blEw* freeAvlNodes;
NIM_BOOL locked;
NIM_BOOL blockChunkSizeIncrease;
NI nextChunkSize;
tyObject_AvlNode__IaqjtwKhxLEpvDS9bct9blEw bottomData;
tyObject_HeapLinks__PDV1HBZ8CQSQJC9aOBFNRSg heapLinks;
};
struct tyObject_GcStat__0RwLoVBHZPfUAcLczmfQAg {
NI collections;
NI maxThreshold;
NI maxStackSize;
NI freedObjects;
};
struct tyObject_SharedList__JI9cx34TL8n3aOKF6tSMBUw {
tyObject_SharedListNodecolonObjectType___KGw0YAw6W9aSz3Sr9aXGu7zg* head;
tyObject_SharedListNodecolonObjectType___KGw0YAw6W9aSz3Sr9aXGu7zg* tail;
CRITICAL_SECTION lock;
};
struct tyObject_GcHeap__1TRH1TZMaVZTnLNcIHuNFQ {
tyObject_GcStack__7fytPA5bBsob6See21YMRA stack;
NI cycleThreshold;
tyObject_CellSeq__Axo1XVm9aaQueTOldv8le5w tempStack;
NI recGcLock;
tyObject_MemRegion__x81NhDv59b8ercDZ9bi85jyg region;
tyObject_GcStat__0RwLoVBHZPfUAcLczmfQAg stat;
tyObject_SharedList__JI9cx34TL8n3aOKF6tSMBUw toDispose;
NI gcThreadId;
tyObject_CellSeq__Axo1XVm9aaQueTOldv8le5w additionalRoots;
};
typedef struct {
N_NIMCALL_PTR(void, ClP_0) (tyProc__HzVCwACFYM9cx9aV62PdjtuA cbproc, void* ClE_0);
void* ClE_0;
} tyProc__VHS3NdmbwcdcZKmKV1JWhw;

/* section: NIM_merge_SEQ_TYPES */
struct tySequence__uB9b75OUPRENsBAu4AnoePA {
  TGenericSeq Sup;
  tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA data[SEQ_DECL_SIZE];
};
struct tySequence__aNpJjaoUowCQc7fBn3wtDQ {
  TGenericSeq Sup;
  tyProc__HzVCwACFYM9cx9aV62PdjtuA data[SEQ_DECL_SIZE];
};
struct tySequence__sM4lkSb7zS6F7OVMvW9cffQ {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
typedef struct {tyProc__9axCnCRMUx32AHzFgBrzSMg localRaiseHook__EIvMhANBvB9cp2Ezvt29cADg;
tySequence__aNpJjaoUowCQc7fBn3wtDQ* threadDestructionHandlers__8OmU3x0fNdA0DLtOmU3kWw;
NI threadId__wzrdPYhtL9czkCWS4o9an9cRw;
TFrame* framePtr__HRfVMH3jYeBJz6Q6X9b6Ptw;
TSafePoint* excHandler__rqLlY5bs9atDw2OXYqJEn5g;
Exception* currException__9bVPeDJlYTi9bQApZpfH8wjg;
GcFrameHeader* gcFramePtr__ot48iojqko9aFxGhyjjjVaA;
NIM_BOOL nimInErrorMode__759bT87luu8XGcbkw13FUjA;
tyObject_GcHeap__1TRH1TZMaVZTnLNcIHuNFQ gch__IcYaEuuWivYAS86vFMTS3Q;
tyObject_TimezonecolonObjectType___F8OvqlxXyGXRSiK9c1fCDVw* utcInstance__oeKVHn4dFpBJO35HhEkelw;
tyObject_TimezonecolonObjectType___F8OvqlxXyGXRSiK9c1fCDVw* localInstance__cLtN9cK9bCe6IPhJ3UFNLNKA;
NIM_BOOL envComputed__LLyFo9bsdu1ZXMDvAe8DhrQ;
tySequence__sM4lkSb7zS6F7OVMvW9cffQ* environment__mlhK49b6YMgc9cgrcYkKq9a3g;
tySequence__sM4lkSb7zS6F7OVMvW9cffQ* ownArgv__WVJ54JSHy7VxacV39bwBPFA;
NIM_BOOL ownParsedArgv__9btHydaUC5pNXxitEZsyzIg;
tyProc__VHS3NdmbwcdcZKmKV1JWhw callSoonProc__9b9b4iUSd60RO2UqC52ifJ6A;
tyObject_PDispatchercolonObjectType___mNiwh37MfaAP9cG4kqT6kpg* gDisp__yIbBArLUsg2pBJkilx4yvg;
tyObject_SslContextcolonObjectType___nNdejAl9bbVbX7sP6RJ4h0w* defaultSslContext__3GZQajZtKdLpqTTN2RjTzw;
NIM_BOOL pyThreadFrameInited__0LBR4zzVR5uWvgtv8SrMjg;
NIM_BOOL gcInited__uuy3PWTwb5gov9ao9bXJYBPg;
NIM_BOOL isSlave__t9a8wsVVRYqGEKhg1vb49b3g;
} NimThreadVars;

/* section: NIM_merge_PROC_HEADERS */
static N_NIMCALL(void, Marker_tyRef__vnhJgWLKYp0PSzekvaMHEw)(void* p, NI op);
N_LIB_PRIVATE N_NIMCALL(NI32, getDesiredAccess__nXXBP5gGyd6nFGTMDCIOFQ)(tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg mode);
N_LIB_PRIVATE N_NIMCALL(NI32, getCreationDisposition__o6D9bbDoNOWIvmZ9cCNw8ejw)(tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg mode, NimStringDesc* filename);
N_LIB_PRIVATE N_NIMCALL(NI16*, newWideCString__rFkWhJjmVi0m0Hc9agVEZIQ)(NimStringDesc* s);
N_LIB_PRIVATE N_NOINLINE(void, raiseOSError__CWyPYlyH9a6rAuZckFyVxPA)(NI32 errorCode, NimStringDesc* additionalInfo);
N_LIB_PRIVATE N_NIMCALL(NI32, osLastError__9bUWNxbcGnToMWA9b79aTXLIw)(void);
N_LIB_PRIVATE N_NIMCALL(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w*, newAsyncFile__lnVLwRoFL9bRDTRoMuqVCaw)(NI fd);
N_LIB_PRIVATE N_NIMCALL(void*, newObj)(TNimType* typ, NI size);
N_LIB_PRIVATE N_NIMCALL(void, register__LiJsPNTTSF22tfHWSDGxJQ)(NI fd);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
static N_INLINE(void*, GetThreadLocalVars)(void);
N_LIB_PRIVATE N_NIMCALL(void*, threadVarGetValue__O8VJSmwa3WY6y9bP6Ht9b7hw)(NI32 dwTlsIndex);
N_LIB_PRIVATE N_NIMCALL(NI64, getFileSize__RWHyc7IJfheHXSjhAJil3Q)(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w* f);
N_LIB_PRIVATE N_NIMCALL(void, nimGCvisit)(void* d, NI op);
static N_NIMCALL(void, Marker_tyRef__3pdOjMHuKYXqpRjBYjU1vw)(void* p, NI op);
N_LIB_PRIVATE N_NIMCALL(tyObject_FuturecolonObjectType___DytvWkqCHojL9aGfYktbFPw*, newFuture__0JOdLmTwOL3FpMJAn3k6Qg)(NimStringDesc* fromProc);
N_LIB_PRIVATE N_NOCONV(void*, alloc0Impl__KzdpcuLT9aef9bsiSHlIu9aFg)(NI size);
N_LIB_PRIVATE N_NIMCALL(tyObject_CustomObj__wOFBYsZJQSZkVC4sY27sow*, newCustom__5VItPN7RNQ9bdEaGg9aXzB1w)(void);
static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a, int v, NI size);
N_LIB_PRIVATE N_CLOSURE(void, colonanonymous___BPX1MuxwJIpC43AI7KI8mQ)(NI fd, NI32 bytesCount, NI32 errcode, void* ClE_0);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, finished__3fkP1fU9aS9bV6HeIXEWDkAA)(tyObject_FuturecolonObjectType___DytvWkqCHojL9aGfYktbFPw* future);
N_NIMCALL(NimStringDesc*, mnewString)(NI len);
static N_INLINE(void, copyMem__i80o3k0SgEI5gTRCzYdyWAsystem)(void* dest, void* source, NI size);
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size);
N_LIB_PRIVATE N_NIMCALL(void, complete__emkcSSMulxV6plj59amRXdw)(tyObject_FuturecolonObjectType___DytvWkqCHojL9aGfYktbFPw* future, NimStringDesc* val);
N_LIB_PRIVATE N_NIMCALL(void, fail__sE9bB9bP7Et9ajfmLBG9cWkSSw)(tyObject_FuturecolonObjectType___DytvWkqCHojL9aGfYktbFPw* future, Exception* error);
N_LIB_PRIVATE N_NIMCALL(NimStringDesc*, osErrorMsg__33xViSVWAmDrexoKkLfMhg)(NI32 errorCode);
N_LIB_PRIVATE N_NOCONV(void, deallocImpl__SAtZpVrJ3o5FJvSdLQe9auA)(void* p);
N_LIB_PRIVATE N_NIMCALL(void, nimGCunref)(void* p);
N_LIB_PRIVATE N_NIMCALL(void, unregister__LiJsPNTTSF22tfHWSDGxJQ_3)(NI fd);

/* section: NIM_merge_DATA */
N_LIB_PRIVATE TNimType NTI__FOwUW0XSSxm8sZ1ubj9b52w_;
extern TNimType NTI__rR5Bzr1D5krxoo1NcNyeMA_;
extern TNimType NTI__Aav8dQoMlCFnZRxA0IhTHQ_;
N_LIB_PRIVATE TNimType NTI__vnhJgWLKYp0PSzekvaMHEw_;
extern TNimType NTI__ytyiCJqK439aF9cIibuRVpAg_;
N_LIB_PRIVATE TNimType NTI__aYPIJ9c0LZwoTeuBIgRTqeA_;
extern TNimType NTI__xHTZrq9aYs6boc9bCba0JbpQ_;
extern TNimType NTI__PGriAzqlEWabm3KuP9cPwnw_;
extern TNimType NTI__vr5DoT1jILTGdRlYv1OYpw_;
N_LIB_PRIVATE TNimType NTI__3pdOjMHuKYXqpRjBYjU1vw_;
STRING_LITERAL(TM__3Pfl7Yz4kHPpbtUoHRPC9aw_4, "asyncfile.read", 14);
extern TNimType NTI__9clYsYwyjCqe2PFTuCI3Ubg_;
extern TNimType NTI__BeJgrOdDsczOwEWOZbRfKA_;

/* section: NIM_merge_VARS */
extern tyProc__A2Q4AG9aesAd2D8S5BP4y2g Dl_13013588_;
extern NI32 globalsSlot__ciXDZu9c27pHpCRMoz4RIgw;
extern tyProc__I8CYTKrqz0DV8EyysIRhJw Dl_13013622_;
extern tyProc__9ajZYMGL5GqiRFqiCC367oA Dl_13011546_;
extern tyProc__diSZYiv729b4Y9b8LJKB7MkA Dl_13014105_;
extern tyProc__P13srMBg9b3d3yEV9aW4NCoA Dl_13011543_;

/* section: NIM_merge_PROCS */
static N_NIMCALL(void, Marker_tyRef__vnhJgWLKYp0PSzekvaMHEw)(void* p, NI op) {
	tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w* a;
	a = (tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w*)p;
}
N_LIB_PRIVATE N_NIMCALL(NI32, getDesiredAccess__nXXBP5gGyd6nFGTMDCIOFQ)(tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg mode) {
	NI32 result;
	result = (NI32)0;
	switch (mode) {
	case ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 0):
	{
		result = ((NI32) (-2147483647 -1));
	}
	break;
	case ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 1):
	case ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 4):
	{
		result = ((NI32) 1073741824);
	}
	break;
	case ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 2):
	case ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 3):
	{
		result = ((NI32) -1073741824);
	}
	break;
	}
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI32, getCreationDisposition__o6D9bbDoNOWIvmZ9cCNw8ejw)(tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg mode, NimStringDesc* filename) {
	NI32 result;
	result = (NI32)0;
	switch (mode) {
	case ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 0):
	case ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 3):
	{
		result = ((NI32) 3);
	}
	break;
	case ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 2):
	case ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 1):
	{
		result = ((NI32) 2);
	}
	break;
	case ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 4):
	{
		result = ((NI32) 4);
	}
	break;
	}
	return result;
}
static N_INLINE(void*, GetThreadLocalVars)(void) {
	void* result;
	void* T1_;
	result = (void*)0;
	T1_ = (void*)0;
	T1_ = threadVarGetValue__O8VJSmwa3WY6y9bP6Ht9b7hw(globalsSlot__ciXDZu9c27pHpCRMoz4RIgw);
	result = ((void*) ((*((tyObject_GcThread__hgJQSlfXDOK3SwSHjeZBXg*) (T1_))).tls));
	return result;
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	NimThreadVars* NimTV_;
	NimTV_ = (NimThreadVars*) GetThreadLocalVars();
	result = (NIM_BOOL*)0;
	result = (&NimTV_->nimInErrorMode__759bT87luu8XGcbkw13FUjA);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w*, newAsyncFile__lnVLwRoFL9bRDTRoMuqVCaw)(NI fd) {
	tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w* result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w*)0;
	result = (tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w*) newObj((&NTI__vnhJgWLKYp0PSzekvaMHEw_), sizeof(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w));
	(*result).fd = fd;
	register__LiJsPNTTSF22tfHWSDGxJQ(fd);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI64, getFileSize__RWHyc7IJfheHXSjhAJil3Q)(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w* f) {
	NI64 result;
	NI32 high;
	NI32 low;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI64)0;
	high = (NI32)0;
	low = Dl_13013622_((*f).fd, (&high));
	{
		NI32 T5_;
		if (!(low == ((NI32) -1))) goto LA3_;
		T5_ = (NI32)0;
		T5_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
		raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(T5_, ((NimStringDesc*) NIM_NIL));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA3_: ;
	result = ((NI64) ((NI32)((NI32)((NU64)(high) << (NU64)(((NI) 32))) | low)));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w*, openAsync__leDQjxVhreSWlV8zfXH9anA)(NimStringDesc* filename, tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg mode) {
	tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w* result;
	NI32 flags;
	NI32 desiredAccess;
	NI32 creationDisposition;
	NI fd;
	NI16* T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w*)0;
	flags = ((NI32) 1073741952);
	desiredAccess = getDesiredAccess__nXXBP5gGyd6nFGTMDCIOFQ(mode);
	creationDisposition = getCreationDisposition__o6D9bbDoNOWIvmZ9cCNw8ejw(mode, filename);
	T1_ = (NI16*)0;
	T1_ = newWideCString__rFkWhJjmVi0m0Hc9agVEZIQ(filename);
	fd = Dl_13013588_(T1_, desiredAccess, ((NI32) 1), NIM_NIL, creationDisposition, flags, ((NI) 0));
	{
		NI32 T6_;
		if (!(fd == ((NI) -1))) goto LA4_;
		T6_ = (NI32)0;
		T6_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
		raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(T6_, ((NimStringDesc*) NIM_NIL));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA4_: ;
	result = newAsyncFile__lnVLwRoFL9bRDTRoMuqVCaw(fd);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI64 T11_;
		if (!(mode == ((tyEnum_FileMode__ZJfK20XeZ9bv2j1pZjw9aswg) 4))) goto LA9_;
		T11_ = (NI64)0;
		T11_ = getFileSize__RWHyc7IJfheHXSjhAJil3Q(result);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		(*result).offset = T11_;
	}
	LA9_: ;
	}BeforeRet_: ;
	return result;
}
static N_NIMCALL(void, Marker_tyRef__3pdOjMHuKYXqpRjBYjU1vw)(void* p, NI op) {
	tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA* a;
	a = (tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA*)p;
	nimGCvisit((void*)(*a).retFuture1, op);
	nimGCvisit((void*)(*a).f3, op);
}
static N_INLINE(void, nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
	nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory(p, ((int) 0), size);
}
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest, source, ((size_t) (size)));
}
static N_INLINE(void, copyMem__i80o3k0SgEI5gTRCzYdyWAsystem)(void* dest, void* source, NI size) {
	nimCopyMem(dest, source, size);
}
N_LIB_PRIVATE N_CLOSURE(void, colonanonymous___BPX1MuxwJIpC43AI7KI8mQ)(NI fd, NI32 bytesCount, NI32 errcode, void* ClE_0) {
	tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA* colonenvP_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colonenvP_ = (tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA*) ClE_0;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = finished__3fkP1fU9aS9bV6HeIXEWDkAA((*colonenvP_).retFuture1);
		if (!!(T3_)) goto LA4_;
		{
			NimStringDesc* data;
			if (!(errcode == ((NI32) -1))) goto LA8_;
			data = mnewString(((NI) (bytesCount)));
			copyMem__i80o3k0SgEI5gTRCzYdyWAsystem(((void*) ((&data->data[((NI) 0)]))), (*colonenvP_).buffer2, ((NI) (bytesCount)));
			(*(*colonenvP_).f3).offset += ((NI) (bytesCount));
			complete__emkcSSMulxV6plj59amRXdw((*colonenvP_).retFuture1, data);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		goto LA6_;
		LA8_: ;
		{
			{
				if (!(errcode == ((NI32) 38))) goto LA13_;
				complete__emkcSSMulxV6plj59amRXdw((*colonenvP_).retFuture1, ((NimStringDesc*) NIM_NIL));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			goto LA11_;
			LA13_: ;
			{
				tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA* T16_;
				Exception* T17_;
				T16_ = (tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA*)0;
				T16_ = (tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA*) newObj((&NTI__9clYsYwyjCqe2PFTuCI3Ubg_), sizeof(tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA));
				(*T16_).Sup.Sup.Sup.m_type = (&NTI__BeJgrOdDsczOwEWOZbRfKA_);
				(*T16_).Sup.Sup.name = "OSError";
				(*T16_).Sup.Sup.message = osErrorMsg__33xViSVWAmDrexoKkLfMhg(errcode);
				(*T16_).Sup.Sup.parent = NIM_NIL;
				T17_ = (Exception*)0;
				T17_ = &T16_->Sup.Sup;
				fail__sE9bB9bP7Et9ajfmLBG9cWkSSw((*colonenvP_).retFuture1, T17_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA11_: ;
		}
		LA6_: ;
	}
	LA4_: ;
	{
		if (!!(((*colonenvP_).buffer2 == NIM_NIL))) goto LA20_;
		deallocImpl__SAtZpVrJ3o5FJvSdLQe9auA((*colonenvP_).buffer2);
		(*colonenvP_).buffer2 = NIM_NIL;
	}
	LA20_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_FuturecolonObjectType___DytvWkqCHojL9aGfYktbFPw*, read__Pxh9c3co7yoSxJ9cj2BoeYBQ)(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w* f, NI size) {
	tyObject_FuturecolonObjectType___DytvWkqCHojL9aGfYktbFPw* result;
	tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA* colonenv_;
	tyObject_CustomObj__wOFBYsZJQSZkVC4sY27sow* ol;
	tyObject_CompletionData__ofDIV6JNvBhV7dQ0MjrTQg T1_;
	tyProc__GKekuTsRDILRxgRrUzbgvQ T2_;
	NI32 ret;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (tyObject_FuturecolonObjectType___DytvWkqCHojL9aGfYktbFPw*)0;
	colonenv_ = (tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA*)0;
	colonenv_ = (tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA*) newObj((&NTI__3pdOjMHuKYXqpRjBYjU1vw_), sizeof(tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA));
	(*colonenv_).Sup.m_type = (&NTI__aYPIJ9c0LZwoTeuBIgRTqeA_);
	(*colonenv_).f3 = f;
	(*colonenv_).retFuture1 = newFuture__0JOdLmTwOL3FpMJAn3k6Qg(((NimStringDesc*) &TM__3Pfl7Yz4kHPpbtUoHRPC9aw_4));
	(*colonenv_).buffer2 = alloc0Impl__KzdpcuLT9aef9bsiSHlIu9aFg(((NI) (size)));
	ol = newCustom__5VItPN7RNQ9bdEaGg9aXzB1w();
	nimZeroMem((void*)(&T1_), sizeof(tyObject_CompletionData__ofDIV6JNvBhV7dQ0MjrTQg));
	nimZeroMem((void*)(&T1_), sizeof(tyObject_CompletionData__ofDIV6JNvBhV7dQ0MjrTQg));
	T1_.fd = (*(*colonenv_).f3).fd;
	nimZeroMem((void*)(&T2_), sizeof(tyProc__GKekuTsRDILRxgRrUzbgvQ));
	T2_.ClP_0 = colonanonymous___BPX1MuxwJIpC43AI7KI8mQ; T2_.ClE_0 = colonenv_;
	T1_.cb.ClE_0 = T2_.ClE_0;
	T1_.cb.ClP_0 = T2_.ClP_0;
	(*ol).data.fd = T1_.fd;
	(*ol).data.cb.ClE_0 = T1_.cb.ClE_0;
	(*ol).data.cb.ClP_0 = T1_.cb.ClP_0;
	(*ol).data.cell = T1_.cell;
	(*ol).Sup.offset = ((NI32) ((NI64)((*(*colonenv_).f3).offset & IL64(4294967295))));
	(*ol).Sup.offsetHigh = ((NI32) ((NI64)((NI64)((*(*colonenv_).f3).offset) >> (NU64)(((NI) 32)))));
	ret = Dl_13011546_((*(*colonenv_).f3).fd, (*colonenv_).buffer2, ((NI32) (size)), NIM_NIL, ((void*) (((tyObject_OVERLAPPED__9ayhTq9cybD7eA9aZA09akSNXg*) (ol)))));
	{
		NI32 err;
		if (!!(((ret) != 0))) goto LA5_;
		err = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
		{
			if (!!((err == ((NI32) 997)))) goto LA9_;
			{
				if (!!(((*colonenv_).buffer2 == NIM_NIL))) goto LA13_;
				deallocImpl__SAtZpVrJ3o5FJvSdLQe9auA((*colonenv_).buffer2);
				(*colonenv_).buffer2 = NIM_NIL;
			}
			LA13_: ;
			if (ol) { nimGCunref(ol); }
			{
				if (!(err == ((NI32) 38))) goto LA17_;
				complete__emkcSSMulxV6plj59amRXdw((*colonenv_).retFuture1, ((NimStringDesc*) NIM_NIL));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			goto LA15_;
			LA17_: ;
			{
				tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA* T20_;
				Exception* T21_;
				T20_ = (tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA*)0;
				T20_ = (tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA*) newObj((&NTI__9clYsYwyjCqe2PFTuCI3Ubg_), sizeof(tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA));
				(*T20_).Sup.Sup.Sup.m_type = (&NTI__BeJgrOdDsczOwEWOZbRfKA_);
				(*T20_).Sup.Sup.name = "OSError";
				(*T20_).Sup.Sup.message = osErrorMsg__33xViSVWAmDrexoKkLfMhg(err);
				(*T20_).Sup.Sup.parent = NIM_NIL;
				T21_ = (Exception*)0;
				T21_ = &T20_->Sup.Sup;
				fail__sE9bB9bP7Et9ajfmLBG9cWkSSw((*colonenv_).retFuture1, T21_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA15_: ;
		}
		LA9_: ;
	}
	goto LA3_;
	LA5_: ;
	{
		NI32 bytesRead;
		NI32 overlappedRes;
		bytesRead = (NI32)0;
		overlappedRes = Dl_13014105_((*(*colonenv_).f3).fd, ((tyObject_OVERLAPPED__9ayhTq9cybD7eA9aZA09akSNXg*) (ol)), (&bytesRead), ((NI32) 0));
		{
			NI32 err_2;
			if (!!(((overlappedRes) != 0))) goto LA25_;
			err_2 = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
			{
				if (!(err_2 == ((NI32) 38))) goto LA29_;
				complete__emkcSSMulxV6plj59amRXdw((*colonenv_).retFuture1, ((NimStringDesc*) NIM_NIL));
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			goto LA27_;
			LA29_: ;
			{
				tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA* T32_;
				NI32 T33_;
				Exception* T34_;
				T32_ = (tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA*)0;
				T32_ = (tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA*) newObj((&NTI__9clYsYwyjCqe2PFTuCI3Ubg_), sizeof(tyObject_OSError__BeJgrOdDsczOwEWOZbRfKA));
				(*T32_).Sup.Sup.Sup.m_type = (&NTI__BeJgrOdDsczOwEWOZbRfKA_);
				(*T32_).Sup.Sup.name = "OSError";
				T33_ = (NI32)0;
				T33_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
				(*T32_).Sup.Sup.message = osErrorMsg__33xViSVWAmDrexoKkLfMhg(T33_);
				(*T32_).Sup.Sup.parent = NIM_NIL;
				T34_ = (Exception*)0;
				T34_ = &T32_->Sup.Sup;
				fail__sE9bB9bP7Et9ajfmLBG9cWkSSw((*colonenv_).retFuture1, T34_);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			}
			LA27_: ;
		}
		goto LA23_;
		LA25_: ;
		{
			NimStringDesc* data;
			data = mnewString(((NI) (bytesRead)));
			copyMem__i80o3k0SgEI5gTRCzYdyWAsystem(((void*) ((&data->data[((NI) 0)]))), (*colonenv_).buffer2, ((NI) (bytesRead)));
			(*(*colonenv_).f3).offset += ((NI) (bytesRead));
			complete__emkcSSMulxV6plj59amRXdw((*colonenv_).retFuture1, data);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		LA23_: ;
	}
	LA3_: ;
	result = (*colonenv_).retFuture1;
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, close__OHqgTJqH9clr3JCrFesUlDQ)(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w* f) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	unregister__LiJsPNTTSF22tfHWSDGxJQ_3((*f).fd);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI32 T3_;
		NI32 T6_;
		T3_ = (NI32)0;
		T3_ = Dl_13011543_((*f).fd);
		if (!!(((T3_) != 0))) goto LA4_;
		T6_ = (NI32)0;
		T6_ = osLastError__9bUWNxbcGnToMWA9b79aTXLIw();
		raiseOSError__CWyPYlyH9a6rAuZckFyVxPA(T6_, ((NimStringDesc*) NIM_NIL));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA4_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, stdlib_asyncfileDatInit000)(void) {

/* section: NIM_merge_TYPE_INIT1 */
static TNimNode* TM__3Pfl7Yz4kHPpbtUoHRPC9aw_2_2[2];
static TNimNode* TM__3Pfl7Yz4kHPpbtUoHRPC9aw_3_4[4];
static TNimNode TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[8];

/* section: NIM_merge_TYPE_INIT3 */
NTI__FOwUW0XSSxm8sZ1ubj9b52w_.size = sizeof(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w);
NTI__FOwUW0XSSxm8sZ1ubj9b52w_.align = NIM_ALIGNOF(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w);
NTI__FOwUW0XSSxm8sZ1ubj9b52w_.kind = 18;
NTI__FOwUW0XSSxm8sZ1ubj9b52w_.base = 0;
NTI__FOwUW0XSSxm8sZ1ubj9b52w_.flags = 3;
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_2_2[0] = &TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[1];
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[1].kind = 1;
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[1].offset = offsetof(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w, fd);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[1].typ = (&NTI__rR5Bzr1D5krxoo1NcNyeMA_);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[1].name = "fd";
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_2_2[1] = &TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[2];
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[2].kind = 1;
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[2].offset = offsetof(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w, offset);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[2].typ = (&NTI__Aav8dQoMlCFnZRxA0IhTHQ_);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[2].name = "offset";
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[0].len = 2; TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[0].kind = 2; TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[0].sons = &TM__3Pfl7Yz4kHPpbtUoHRPC9aw_2_2[0];
NTI__FOwUW0XSSxm8sZ1ubj9b52w_.node = &TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[0];
NTI__vnhJgWLKYp0PSzekvaMHEw_.size = sizeof(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w*);
NTI__vnhJgWLKYp0PSzekvaMHEw_.align = NIM_ALIGNOF(tyObject_AsyncFilecolonObjectType___FOwUW0XSSxm8sZ1ubj9b52w*);
NTI__vnhJgWLKYp0PSzekvaMHEw_.kind = 22;
NTI__vnhJgWLKYp0PSzekvaMHEw_.base = (&NTI__FOwUW0XSSxm8sZ1ubj9b52w_);
NTI__vnhJgWLKYp0PSzekvaMHEw_.flags = 2;
NTI__vnhJgWLKYp0PSzekvaMHEw_.marker = Marker_tyRef__vnhJgWLKYp0PSzekvaMHEw;
NTI__aYPIJ9c0LZwoTeuBIgRTqeA_.size = sizeof(tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA);
NTI__aYPIJ9c0LZwoTeuBIgRTqeA_.align = NIM_ALIGNOF(tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA);
NTI__aYPIJ9c0LZwoTeuBIgRTqeA_.kind = 17;
NTI__aYPIJ9c0LZwoTeuBIgRTqeA_.base = (&NTI__ytyiCJqK439aF9cIibuRVpAg_);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_3_4[0] = &TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[4];
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[4].kind = 1;
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[4].offset = offsetof(tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA, colonstate_);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[4].typ = (&NTI__xHTZrq9aYs6boc9bCba0JbpQ_);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[4].name = ":state";
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_3_4[1] = &TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[5];
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[5].kind = 1;
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[5].offset = offsetof(tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA, retFuture1);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[5].typ = (&NTI__PGriAzqlEWabm3KuP9cPwnw_);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[5].name = "retFuture1";
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_3_4[2] = &TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[6];
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[6].kind = 1;
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[6].offset = offsetof(tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA, buffer2);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[6].typ = (&NTI__vr5DoT1jILTGdRlYv1OYpw_);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[6].name = "buffer2";
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_3_4[3] = &TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[7];
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[7].kind = 1;
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[7].offset = offsetof(tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA, f3);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[7].typ = (&NTI__vnhJgWLKYp0PSzekvaMHEw_);
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[7].name = "f3";
TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[3].len = 4; TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[3].kind = 2; TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[3].sons = &TM__3Pfl7Yz4kHPpbtUoHRPC9aw_3_4[0];
NTI__aYPIJ9c0LZwoTeuBIgRTqeA_.node = &TM__3Pfl7Yz4kHPpbtUoHRPC9aw_0[3];
NTI__3pdOjMHuKYXqpRjBYjU1vw_.size = sizeof(tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA*);
NTI__3pdOjMHuKYXqpRjBYjU1vw_.align = NIM_ALIGNOF(tyObject_Env_asyncfiledotnim_read___aYPIJ9c0LZwoTeuBIgRTqeA*);
NTI__3pdOjMHuKYXqpRjBYjU1vw_.kind = 22;
NTI__3pdOjMHuKYXqpRjBYjU1vw_.base = (&NTI__aYPIJ9c0LZwoTeuBIgRTqeA_);
NTI__3pdOjMHuKYXqpRjBYjU1vw_.marker = Marker_tyRef__3pdOjMHuKYXqpRjBYjU1vw;
}

